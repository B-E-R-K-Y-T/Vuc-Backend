2024-03-04 03:41:20,226: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:41:20,270: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 03:41:20,307: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 38, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 147, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 03:41:20,316: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 03:41:20,357: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 03:41:20,393: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 62, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 158, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 03:41:20,396: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:41:20,439: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 03:41:20,476: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 77, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 03:41:20,479: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:41:20,520: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 03:41:20,558: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:41:20,602: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 03:41:20,643: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:41:20,677: root - ERROR - e=TelegramIDError(), e.__class__=<class 'exceptions.TelegramIDError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 140, in set_user_email
    raise TelegramIDError(
exceptions.TelegramIDError: Email user@example.com already exists.
2024-03-04 03:41:20,680: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 03:41:20,797: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 03:41:20,799: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 03:41:20,840: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 03:41:20,881: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 03:41:20,932: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 03:41:20,971: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:41:21,005: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:41:21,039: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:41:21,073: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:41:21,107: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 83, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 03:41:21,111: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 03:41:25,223: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::7ba60fa846d2cc1682e03a9fc6604c57' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 03:41:29,311: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::7ba60fa846d2cc1682e03a9fc6604c57' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 03:41:29,319: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 03:41:29,379: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 48, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 03:41:29,382: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 03:41:29,422: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 43, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 03:41:29,425: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 03:41:29,470: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 03:41:29,545: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 03:41:29,618: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 03:41:29,620: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 03:41:29,657: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 03:41:29,719: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,719: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,720: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,720: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,721: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,721: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,721: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,723: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,723: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,724: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,724: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,724: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,725: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,725: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,725: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,726: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,726: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,726: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,727: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,727: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,727: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,728: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,728: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,728: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,729: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,729: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,729: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,746: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,746: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,746: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,747: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,747: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,747: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:41:29,748: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:42:49,582: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:42:49,583: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:42:49,721: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 03:42:49,755: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 03:42:49,756: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 03:42:49,756: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 03:42:50,009: root - INFO - User 2 has registered.
2024-03-04 03:42:50,013: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 03:42:50,284: root - INFO - User 3 has registered.
2024-03-04 03:42:50,287: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 03:42:50,321: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 03:42:50,586: root - INFO - User 4 has registered.
2024-03-04 03:42:50,589: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 03:42:50,591: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:42:50,591: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 03:42:50,591: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:42:50,591: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:42:50,591: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 03:42:50,591: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 03:42:50,591: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:42:50,591: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:42:50,592: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 03:42:50,592: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 03:42:50,592: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:42:50,592: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:42:50,592: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 03:42:50,592: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:42:50,592: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:42:50,592: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 03:42:50,592: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:42:50,592: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:42:50,592: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 03:42:50,593: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:42:50,593: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 03:42:50,824: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 03:42:50,878: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 03:42:50,913: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 45, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 03:42:50,917: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:42:50,957: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 03:42:51,028: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 03:42:51,099: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 84, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 199, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 03:42:51,101: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:42:51,140: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 03:42:51,177: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 99, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 220, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 03:42:51,180: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:42:51,221: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 03:42:51,256: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 38, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 147, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 03:42:51,260: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 03:42:51,300: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 03:42:51,335: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 62, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 158, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 03:42:51,338: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:42:51,377: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 03:42:51,415: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 77, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 03:42:51,418: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:42:51,459: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 03:42:51,498: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:42:51,547: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 03:42:51,583: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:42:51,616: root - ERROR - e=TelegramIDError(), e.__class__=<class 'exceptions.TelegramIDError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 140, in set_user_email
    raise TelegramIDError(
exceptions.TelegramIDError: Email user@example.com already exists.
2024-03-04 03:42:51,619: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 03:42:51,733: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 03:42:51,736: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 03:42:51,777: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 03:42:51,815: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 03:42:51,865: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 03:42:51,902: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:42:51,936: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:42:51,969: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:42:52,006: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:42:52,038: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 83, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 03:42:52,041: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 03:42:56,163: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::e38e9ad4e32b62dcd693fb166e8ec1f8' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 03:43:00,268: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::e38e9ad4e32b62dcd693fb166e8ec1f8' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 03:43:00,275: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 03:43:00,340: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 48, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 03:43:00,343: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 03:43:00,381: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 43, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 03:43:00,384: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 03:43:00,433: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 03:43:00,509: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 03:43:00,582: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 03:43:00,585: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 03:43:00,624: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 03:43:00,685: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,686: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,687: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,687: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,687: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,688: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,688: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,688: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,689: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,690: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,690: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,691: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,691: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,691: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,692: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,692: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,692: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,693: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,693: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,693: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,694: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,694: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,694: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,695: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,695: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,696: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,696: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,696: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,697: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,697: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,697: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,698: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,698: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:43:00,698: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:47:07,962: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 03:47:08,083: watchfiles.main - DEBUG - 5 changes detected: {(<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc.2719601167408'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc.2719601167408'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc')}
2024-03-04 03:47:51,332: watchfiles.main - DEBUG - 3 changes detected: {(<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py~'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py~'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py')}
2024-03-04 03:47:59,410: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 03:47:59,545: watchfiles.main - DEBUG - 5 changes detected: {(<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc.1752875575984'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc.1752875575984'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc')}
2024-03-04 03:48:12,497: watchfiles.main - DEBUG - 3 changes detected: {(<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py~'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py~'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py')}
2024-03-04 03:48:21,677: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 03:48:21,810: watchfiles.main - DEBUG - 5 changes detected: {(<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc.2786108460080'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc.2786108460080'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc')}
2024-03-04 03:49:50,124: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:49:50,125: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:49:50,279: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 03:49:50,314: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 03:49:50,315: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 03:49:50,315: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 03:49:50,567: root - INFO - User 2 has registered.
2024-03-04 03:49:50,571: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 03:49:50,847: root - INFO - User 3 has registered.
2024-03-04 03:49:50,850: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 03:49:50,887: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 03:49:51,156: root - INFO - User 4 has registered.
2024-03-04 03:49:51,159: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 03:49:51,162: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:49:51,162: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 03:49:51,162: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:49:51,162: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:49:51,162: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 03:49:51,162: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:49:51,163: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:49:51,164: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 03:49:51,164: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:49:51,164: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 03:49:51,399: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 03:49:51,450: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 03:49:51,488: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 45, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 03:49:51,492: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:49:51,534: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 03:49:51,610: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 03:49:51,682: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 84, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 199, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 03:49:51,683: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:49:51,725: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 03:49:51,764: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 99, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 220, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 03:49:51,767: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:49:51,813: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 03:49:51,852: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 38, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 147, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 03:49:51,855: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 03:49:51,895: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 03:49:51,934: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 62, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 158, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 03:49:51,938: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:49:51,979: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 03:49:52,017: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 77, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 03:49:52,020: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 03:49:52,060: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 03:49:52,098: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:49:52,140: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 03:49:52,177: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:49:52,211: root - ERROR - e=TelegramIDError(), e.__class__=<class 'exceptions.TelegramIDError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 140, in set_user_email
    raise TelegramIDError(
exceptions.TelegramIDError: Email user@example.com already exists.
2024-03-04 03:49:52,214: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 03:49:52,331: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 03:49:52,334: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 03:49:52,377: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 03:49:52,416: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 03:49:52,464: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 03:49:52,504: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:49:52,539: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:49:52,573: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:49:52,607: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 03:49:52,643: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 83, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 03:49:52,646: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 03:49:56,715: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::f8ab1c0e878553fd5df97781aa57b8f4' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 03:50:00,796: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::f8ab1c0e878553fd5df97781aa57b8f4' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 03:50:00,804: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 03:50:00,865: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 48, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 03:50:00,868: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 03:50:00,909: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 43, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 03:50:00,912: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 03:50:00,963: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 03:50:01,053: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 03:50:01,130: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 03:50:01,133: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 03:50:01,173: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 03:50:01,233: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,234: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,234: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,235: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,235: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,236: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,236: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,236: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,237: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,237: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,238: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,238: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,238: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,239: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,239: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,240: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,240: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,240: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,241: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,241: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,251: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,251: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,252: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,252: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,253: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,267: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,267: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,268: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,268: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,269: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,269: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,270: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,270: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:01,270: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 03:50:27,098: watchfiles.main - DEBUG - 3 changes detected: {(<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py~'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py~')}
2024-03-04 03:53:20,555: watchfiles.main - DEBUG - 6 changes detected: {(<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py~'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\main.py~')}
2024-03-04 03:53:23,256: watchfiles.main - DEBUG - 3 changes detected: {(<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~')}
2024-03-04 03:53:23,908: watchfiles.main - DEBUG - 5 changes detected: {(<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc.2021851761712'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc.2021851761712'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc')}
2024-03-04 03:53:33,292: watchfiles.main - DEBUG - 3 changes detected: {(<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~')}
2024-03-04 03:53:33,926: watchfiles.main - DEBUG - 5 changes detected: {(<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc.3253468171312'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc.3253468171312'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc')}
2024-03-04 03:53:54,929: watchfiles.main - DEBUG - 3 changes detected: {(<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~')}
2024-03-04 03:53:55,575: watchfiles.main - DEBUG - 5 changes detected: {(<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc.2027882253360'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc.2027882253360'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\config.cpython-312.pyc')}
2024-03-04 03:53:56,016: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 03:53:56,140: watchfiles.main - DEBUG - 5 changes detected: {(<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc.2027905847600'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc.2027905847600'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\__pycache__\\main.cpython-312.pyc')}
2024-03-04 03:54:37,908: watchfiles.main - DEBUG - 3 changes detected: {(<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~')}
2024-03-04 03:54:54,340: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 03:55:02,531: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:55:02,532: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-04 03:55:02,532: multipart.multipart - DEBUG - Calling on_field_data with data[9:14]
2024-03-04 03:55:02,532: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:55:02,533: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:55:02,533: multipart.multipart - DEBUG - Calling on_field_name with data[15:23]
2024-03-04 03:55:02,533: multipart.multipart - DEBUG - Calling on_field_data with data[24:56]
2024-03-04 03:55:02,533: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:55:02,533: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 03:55:54,732: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 03:55:55,929: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:55:55,929: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-04 03:55:55,929: multipart.multipart - DEBUG - Calling on_field_data with data[9:14]
2024-03-04 03:55:55,929: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:55:55,929: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:55:55,929: multipart.multipart - DEBUG - Calling on_field_name with data[15:23]
2024-03-04 03:55:55,929: multipart.multipart - DEBUG - Calling on_field_data with data[24:56]
2024-03-04 03:55:55,930: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:55:55,930: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 03:56:50,826: watchfiles.main - DEBUG - 3 changes detected: {(<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py')}
2024-03-04 03:56:55,469: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 03:56:58,721: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 03:57:09,833: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:57:09,833: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-04 03:57:09,834: multipart.multipart - DEBUG - Calling on_field_data with data[9:14]
2024-03-04 03:57:09,834: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:57:09,834: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:57:09,834: multipart.multipart - DEBUG - Calling on_field_name with data[15:23]
2024-03-04 03:57:09,835: multipart.multipart - DEBUG - Calling on_field_data with data[24:56]
2024-03-04 03:57:09,835: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:57:09,835: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 03:57:32,173: watchfiles.main - DEBUG - 3 changes detected: {(<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~'), (<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py')}
2024-03-04 03:57:38,632: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 03:57:41,491: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:57:41,491: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-04 03:57:41,492: multipart.multipart - DEBUG - Calling on_field_data with data[9:14]
2024-03-04 03:57:41,492: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:57:41,492: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 03:57:41,492: multipart.multipart - DEBUG - Calling on_field_name with data[15:23]
2024-03-04 03:57:41,493: multipart.multipart - DEBUG - Calling on_field_data with data[24:56]
2024-03-04 03:57:41,493: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 03:57:41,493: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 03:58:06,572: watchfiles.main - DEBUG - 3 changes detected: {(<Change.added: 1>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~'), (<Change.modified: 2>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py'), (<Change.deleted: 3>, 'C:\\Users\\Berky\\PycharmProjects\\vuc-backend\\src\\config.py~')}
2024-03-04 03:58:11,047: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 04:03:26,560: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 04:03:32,871: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 04:03:32,871: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-04 04:03:32,872: multipart.multipart - DEBUG - Calling on_field_data with data[9:14]
2024-03-04 04:03:32,872: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 04:03:32,872: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 04:03:32,872: multipart.multipart - DEBUG - Calling on_field_name with data[15:23]
2024-03-04 04:03:32,873: multipart.multipart - DEBUG - Calling on_field_data with data[24:56]
2024-03-04 04:03:32,873: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 04:03:32,873: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 04:03:54,507: asyncio - DEBUG - Using selector: SelectSelector
2024-03-04 04:14:52,622: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:14:52,623: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:14:52,903: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 04:14:52,951: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 04:14:52,953: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 04:14:52,953: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 04:14:53,242: root - INFO - User 2 has registered.
2024-03-04 04:14:53,247: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 04:14:53,587: root - INFO - User 3 has registered.
2024-03-04 04:14:53,590: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 04:14:53,632: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 04:14:53,952: root - INFO - User 4 has registered.
2024-03-04 04:14:53,956: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 04:14:53,959: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 04:14:53,959: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 04:14:53,959: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 04:14:53,960: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 04:14:53,960: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 04:14:53,960: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 04:14:53,960: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 04:14:53,960: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 04:14:53,960: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 04:14:53,960: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 04:14:53,960: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 04:14:53,960: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 04:14:53,960: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 04:14:53,960: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 04:14:53,961: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 04:14:53,961: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 04:14:53,961: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 04:14:53,961: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 04:14:53,961: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 04:14:53,961: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 04:14:53,961: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 04:14:54,251: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 04:14:54,303: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 04:14:54,349: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 04:14:54,354: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 04:14:58,486: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::0904e903b647ab6f232488b1faac6946' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 04:15:02,581: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::0904e903b647ab6f232488b1faac6946' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 04:15:02,589: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 04:15:02,689: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 04:15:02,781: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 199, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 04:15:02,782: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 04:15:02,828: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 04:15:02,867: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 220, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 04:15:02,871: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 04:15:02,912: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 04:15:02,951: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 38, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 147, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 04:15:02,954: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 04:15:02,995: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 04:15:03,034: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 62, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 158, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 04:15:03,037: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 04:15:03,080: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 04:15:03,118: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 77, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 04:15:03,122: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 04:15:03,164: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 04:15:03,201: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 04:15:03,246: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 04:15:03,284: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 04:15:03,320: root - ERROR - e=TelegramIDError(), e.__class__=<class 'exceptions.TelegramIDError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 140, in set_user_email
    raise TelegramIDError(
exceptions.TelegramIDError: Email user@example.com already exists.
2024-03-04 04:15:03,324: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 04:15:03,442: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 04:15:03,444: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 04:15:03,484: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 04:15:03,525: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 04:15:03,576: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 04:15:03,613: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 04:15:03,649: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 04:15:03,684: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 04:15:03,718: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 04:15:03,751: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 83, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 04:15:03,754: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 04:15:07,890: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::8a42a8e9821e568317031c28136d01f7' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 04:15:11,958: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::8a42a8e9821e568317031c28136d01f7' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 04:15:11,965: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 04:15:12,032: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 48, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 04:15:12,035: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 04:15:12,070: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 43, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 04:15:12,073: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 04:15:12,119: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 04:15:12,193: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 04:15:12,267: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 04:15:12,270: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 04:15:12,310: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 04:15:12,385: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,386: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,386: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,387: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,387: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,387: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,388: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,388: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,388: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,389: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,389: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,389: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,390: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,390: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,391: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,412: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,413: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,413: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,414: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,414: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,414: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,415: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,415: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,415: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,416: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,416: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,416: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,417: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,417: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,417: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,418: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,418: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,419: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 04:15:12,419: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:30:26,134: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:30:26,135: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-04 11:30:26,135: multipart.multipart - DEBUG - Calling on_field_data with data[9:14]
2024-03-04 11:30:26,136: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:30:26,136: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:30:26,136: multipart.multipart - DEBUG - Calling on_field_name with data[15:23]
2024-03-04 11:30:26,136: multipart.multipart - DEBUG - Calling on_field_data with data[24:56]
2024-03-04 11:30:26,136: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:30:26,137: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:30:27,445: sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2024-03-04 11:30:27,445: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:30:27,449: sqlalchemy.engine.Engine - INFO - select current_schema()
2024-03-04 11:30:27,450: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:30:27,453: sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2024-03-04 11:30:27,453: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:30:27,456: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:27,458: sqlalchemy.engine.Engine - INFO - SELECT count(admins.id) AS count_1 
FROM admins
2024-03-04 11:30:27,459: sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ()
2024-03-04 11:30:27,462: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:27,463: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:27,465: sqlalchemy.engine.Engine - INFO - SELECT admins.id, admins.name, admins.email, admins.password 
FROM admins ORDER BY admins.id ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:30:27,466: sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] (10, 0)
2024-03-04 11:30:27,469: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:29,029: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:29,030: sqlalchemy.engine.Engine - INFO - SELECT count(platoon.platoon_number) AS count_1 
FROM platoon
2024-03-04 11:30:29,031: sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ()
2024-03-04 11:30:29,036: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:29,038: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:29,039: sqlalchemy.engine.Engine - INFO - SELECT platoon.platoon_number, platoon.vus, platoon.semester 
FROM platoon ORDER BY platoon.platoon_number ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:30:29,039: sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] (10, 0)
2024-03-04 11:30:29,044: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:29,956: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:29,957: sqlalchemy.engine.Engine - INFO - SELECT schedule.id, schedule.aud, schedule.platoon_number, schedule.day_id 
FROM schedule
2024-03-04 11:30:29,958: sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2024-03-04 11:30:29,962: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:29,964: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:29,966: sqlalchemy.engine.Engine - INFO - SELECT subject.id, subject.platoon_id, subject.semester, subject.admin_id, subject.name 
FROM subject
2024-03-04 11:30:29,966: sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ()
2024-03-04 11:30:29,971: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:29,973: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:29,975: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user"
2024-03-04 11:30:29,976: sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ()
2024-03-04 11:30:29,982: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:34,374: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:34,375: sqlalchemy.engine.Engine - INFO - SELECT schedule.id, schedule.aud, schedule.platoon_number, schedule.day_id 
FROM schedule
2024-03-04 11:30:34,376: sqlalchemy.engine.Engine - INFO - [cached since 4.419s ago] ()
2024-03-04 11:30:34,379: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:34,382: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:34,383: sqlalchemy.engine.Engine - INFO - SELECT subject.id, subject.platoon_id, subject.semester, subject.admin_id, subject.name 
FROM subject
2024-03-04 11:30:34,383: sqlalchemy.engine.Engine - INFO - [cached since 4.419s ago] ()
2024-03-04 11:30:34,387: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:34,391: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:34,392: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user"
2024-03-04 11:30:34,392: sqlalchemy.engine.Engine - INFO - [cached since 4.417s ago] ()
2024-03-04 11:30:34,395: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:34,397: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:30:34,397: multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2024-03-04 11:30:34,397: multipart.multipart - DEBUG - Calling on_header_value with data[63:95]
2024-03-04 11:30:34,397: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:30:34,398: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:30:34,398: multipart.multipart - DEBUG - Calling on_part_data with data[99:102]
2024-03-04 11:30:34,398: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:30:34,398: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:30:34,399: multipart.multipart - DEBUG - Calling on_header_field with data[146:165]
2024-03-04 11:30:34,399: multipart.multipart - DEBUG - Calling on_header_value with data[167:188]
2024-03-04 11:30:34,399: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:30:34,399: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:30:34,399: multipart.multipart - DEBUG - Calling on_part_data with data[192:193]
2024-03-04 11:30:34,400: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:30:34,400: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:30:34,400: multipart.multipart - DEBUG - Calling on_header_field with data[237:256]
2024-03-04 11:30:34,400: multipart.multipart - DEBUG - Calling on_header_value with data[258:284]
2024-03-04 11:30:34,400: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:30:34,401: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:30:34,401: multipart.multipart - DEBUG - Calling on_part_data with data[288:289]
2024-03-04 11:30:34,401: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:30:34,401: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:30:34,401: multipart.multipart - DEBUG - Calling on_header_field with data[333:352]
2024-03-04 11:30:34,402: multipart.multipart - DEBUG - Calling on_header_value with data[354:376]
2024-03-04 11:30:34,402: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:30:34,402: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:30:34,402: multipart.multipart - DEBUG - Calling on_part_data with data[380:384]
2024-03-04 11:30:34,403: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:30:34,403: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:30:34,410: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:34,412: sqlalchemy.engine.Engine - INFO - INSERT INTO platoon (platoon_number, vus, semester) VALUES ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2024-03-04 11:30:34,413: sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] (818, 1, 1)
2024-03-04 11:30:34,417: sqlalchemy.engine.Engine - INFO - COMMIT
2024-03-04 11:30:34,435: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:34,435: sqlalchemy.engine.Engine - INFO - SELECT count(platoon.platoon_number) AS count_1 
FROM platoon
2024-03-04 11:30:34,436: sqlalchemy.engine.Engine - INFO - [cached since 5.406s ago] ()
2024-03-04 11:30:34,439: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:34,441: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:34,441: sqlalchemy.engine.Engine - INFO - SELECT platoon.platoon_number, platoon.vus, platoon.semester 
FROM platoon ORDER BY platoon.platoon_number ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:30:34,442: sqlalchemy.engine.Engine - INFO - [cached since 5.403s ago] (10, 0)
2024-03-04 11:30:34,444: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:36,212: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:36,213: sqlalchemy.engine.Engine - INFO - SELECT count("user".id) AS count_1 
FROM "user"
2024-03-04 11:30:36,214: sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2024-03-04 11:30:36,217: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:36,218: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:36,220: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" ORDER BY "user".id ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:30:36,220: sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] (10, 0)
2024-03-04 11:30:36,223: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:37,192: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:37,193: sqlalchemy.engine.Engine - INFO - SELECT attend.id, attend.user_id, attend.date_v, attend.visiting, attend.semester, attend.confirmed 
FROM attend
2024-03-04 11:30:37,194: sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ()
2024-03-04 11:30:37,199: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:37,201: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:37,202: sqlalchemy.engine.Engine - INFO - SELECT grading.id, grading.subj_id, grading.user_id, grading.mark, grading.mark_date, grading.theme 
FROM grading
2024-03-04 11:30:37,203: sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ()
2024-03-04 11:30:37,207: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:37,209: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:37,210: sqlalchemy.engine.Engine - INFO - SELECT message_queue.id, message_queue.telegram_id, message_queue.message 
FROM message_queue
2024-03-04 11:30:37,211: sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ()
2024-03-04 11:30:37,215: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:39,203: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:39,205: sqlalchemy.engine.Engine - INFO - SELECT platoon.platoon_number, platoon.vus, platoon.semester 
FROM platoon 
WHERE CAST(platoon.platoon_number AS VARCHAR) ILIKE $1::VARCHAR 
 LIMIT $2::INTEGER
2024-03-04 11:30:39,205: sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ('%8%', 10)
2024-03-04 11:30:39,210: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:39,246: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:39,246: sqlalchemy.engine.Engine - INFO - SELECT platoon.platoon_number, platoon.vus, platoon.semester 
FROM platoon 
WHERE CAST(platoon.platoon_number AS VARCHAR) ILIKE $1::VARCHAR 
 LIMIT $2::INTEGER
2024-03-04 11:30:39,247: sqlalchemy.engine.Engine - INFO - [cached since 0.04185s ago] ('%81%', 10)
2024-03-04 11:30:39,249: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:39,345: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:39,346: sqlalchemy.engine.Engine - INFO - SELECT platoon.platoon_number, platoon.vus, platoon.semester 
FROM platoon 
WHERE CAST(platoon.platoon_number AS VARCHAR) ILIKE $1::VARCHAR 
 LIMIT $2::INTEGER
2024-03-04 11:30:39,346: sqlalchemy.engine.Engine - INFO - [cached since 0.1418s ago] ('%818%', 10)
2024-03-04 11:30:39,349: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:30:54,076: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:30:54,085: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:54,086: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-04 11:30:54,087: sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ('user@example.com',)
2024-03-04 11:30:54,092: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 11:30:54,094: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 11:30:54,094: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 11:30:54,355: sqlalchemy.engine.Engine - INFO - INSERT INTO "user" (name, phone, date_of_birth, address, institute, direction_of_study, platoon_number, squad_number, role, telegram_id, token, group_study, email, registered_at, hashed_password, is_active, is_superuser, is_verified) VALUES ($1::VARCHAR, $2::VARCHAR, $3::DATE, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR, $10::INTEGER, $11::VARCHAR, $12::VARCHAR, $13::VARCHAR, $14::TIMESTAMP WITHOUT TIME ZONE, $15::VARCHAR, $16::BOOLEAN, $17::BOOLEAN, $18::BOOLEAN) RETURNING "user".id
2024-03-04 11:30:54,356: sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ('string', 'string', datetime.datetime(2024, 3, 4, 8, 30, 48, 11000, tzinfo=TzInfo(UTC)), 'string', 'string', 'string', 818, 1, 'Admin', 0, 'TDB5hDQBFMLZmmk639E3opPsV', 'string', 'user@example.com', datetime.datetime(2024, 3, 4, 8, 30, 15, 160434), '$2b$12$1hH8ugmLScdy.YC844dblO8LWk3UEInaANxy3MLLMvxIJvCTXGprW', True, False, False)
2024-03-04 11:30:54,364: sqlalchemy.engine.Engine - INFO - COMMIT
2024-03-04 11:30:54,367: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:30:54,369: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE "user".id = $1::INTEGER
2024-03-04 11:30:54,370: sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] (1,)
2024-03-04 11:30:54,374: root - INFO - User 1 has registered.
2024-03-04 11:30:54,377: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:31:05,969: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:31:05,969: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 11:31:05,969: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:31:05,970: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:31:05,970: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 11:31:05,970: multipart.multipart - DEBUG - Calling on_field_data with data[21:39]
2024-03-04 11:31:05,971: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:31:05,971: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:31:05,971: multipart.multipart - DEBUG - Calling on_field_name with data[40:48]
2024-03-04 11:31:05,971: multipart.multipart - DEBUG - Calling on_field_data with data[49:55]
2024-03-04 11:31:05,972: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:31:05,972: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:31:05,972: multipart.multipart - DEBUG - Calling on_field_name with data[56:61]
2024-03-04 11:31:05,972: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:31:05,972: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:31:05,973: multipart.multipart - DEBUG - Calling on_field_name with data[63:72]
2024-03-04 11:31:05,973: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:31:05,973: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:31:05,973: multipart.multipart - DEBUG - Calling on_field_name with data[74:87]
2024-03-04 11:31:05,973: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:31:05,974: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:31:05,976: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:31:05,978: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-04 11:31:05,979: sqlalchemy.engine.Engine - INFO - [cached since 11.89s ago] ('user@example.com',)
2024-03-04 11:31:06,215: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:31:41,963: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:31:41,964: sqlalchemy.engine.Engine - INFO - SELECT count(attend.id) AS count_1 
FROM attend
2024-03-04 11:31:41,965: sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ()
2024-03-04 11:31:41,969: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:31:41,971: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:31:41,972: sqlalchemy.engine.Engine - INFO - SELECT attend.id, attend.user_id, attend.date_v, attend.visiting, attend.semester, attend.confirmed 
FROM attend ORDER BY attend.id ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:31:41,973: sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] (10, 0)
2024-03-04 11:31:41,978: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:31:46,467: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:31:46,469: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE CAST("user".id AS VARCHAR) ILIKE $1::VARCHAR OR CAST("user".name AS VARCHAR) ILIKE $2::VARCHAR OR CAST("user".platoon_number AS VARCHAR) ILIKE $3::VARCHAR 
 LIMIT $4::INTEGER
2024-03-04 11:31:46,470: sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('%1%', '%1%', '%1%', 10)
2024-03-04 11:31:46,474: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:31:53,950: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:31:53,950: multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2024-03-04 11:31:53,951: multipart.multipart - DEBUG - Calling on_header_value with data[63:85]
2024-03-04 11:31:53,951: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:31:53,951: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:31:53,951: multipart.multipart - DEBUG - Calling on_part_data with data[89:90]
2024-03-04 11:31:53,951: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:31:53,953: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:31:53,953: multipart.multipart - DEBUG - Calling on_header_field with data[134:153]
2024-03-04 11:31:53,953: multipart.multipart - DEBUG - Calling on_header_value with data[155:179]
2024-03-04 11:31:53,953: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:31:53,953: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:31:53,954: multipart.multipart - DEBUG - Calling on_part_data with data[183:193]
2024-03-04 11:31:53,954: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:31:53,954: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:31:53,954: multipart.multipart - DEBUG - Calling on_header_field with data[237:256]
2024-03-04 11:31:53,954: multipart.multipart - DEBUG - Calling on_header_value with data[258:284]
2024-03-04 11:31:53,955: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:31:53,955: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:31:53,955: multipart.multipart - DEBUG - Calling on_part_data with data[288:289]
2024-03-04 11:31:53,955: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:31:53,955: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:31:53,956: multipart.multipart - DEBUG - Calling on_header_field with data[333:352]
2024-03-04 11:31:53,956: multipart.multipart - DEBUG - Calling on_header_value with data[354:380]
2024-03-04 11:31:53,956: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:31:53,956: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:31:53,957: multipart.multipart - DEBUG - Calling on_part_data with data[384:385]
2024-03-04 11:31:53,957: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:31:53,957: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:31:53,957: multipart.multipart - DEBUG - Calling on_header_field with data[429:448]
2024-03-04 11:31:53,957: multipart.multipart - DEBUG - Calling on_header_value with data[450:477]
2024-03-04 11:31:53,957: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:31:53,958: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:31:53,958: multipart.multipart - DEBUG - Calling on_part_data with data[481:482]
2024-03-04 11:31:53,958: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:31:53,958: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:31:53,958: multipart.multipart - DEBUG - Calling on_header_field with data[526:545]
2024-03-04 11:31:53,959: multipart.multipart - DEBUG - Calling on_header_value with data[547:569]
2024-03-04 11:31:53,959: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:31:53,959: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:31:53,959: multipart.multipart - DEBUG - Calling on_part_data with data[573:577]
2024-03-04 11:31:53,959: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:31:53,959: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:31:53,964: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:31:53,965: sqlalchemy.engine.Engine - INFO - INSERT INTO attend (user_id, date_v, visiting, semester, confirmed) VALUES ($1::INTEGER, $2::DATE, $3::INTEGER, $4::INTEGER, $5::BOOLEAN) RETURNING attend.id
2024-03-04 11:31:53,966: sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] (1, datetime.date(2024, 3, 4), 1, 1, True)
2024-03-04 11:31:53,970: sqlalchemy.engine.Engine - INFO - COMMIT
2024-03-04 11:31:53,993: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:31:53,994: sqlalchemy.engine.Engine - INFO - SELECT count(attend.id) AS count_1 
FROM attend
2024-03-04 11:31:53,994: sqlalchemy.engine.Engine - INFO - [cached since 12.03s ago] ()
2024-03-04 11:31:53,997: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:31:53,998: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:31:53,999: sqlalchemy.engine.Engine - INFO - SELECT attend.id, attend.user_id, attend.date_v, attend.visiting, attend.semester, attend.confirmed 
FROM attend ORDER BY attend.id ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:31:53,999: sqlalchemy.engine.Engine - INFO - [cached since 12.03s ago] (10, 0)
2024-03-04 11:31:54,002: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:31:58,748: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:31:58,749: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE CAST("user".id AS VARCHAR) ILIKE $1::VARCHAR OR CAST("user".name AS VARCHAR) ILIKE $2::VARCHAR OR CAST("user".platoon_number AS VARCHAR) ILIKE $3::VARCHAR 
 LIMIT $4::INTEGER
2024-03-04 11:31:58,750: sqlalchemy.engine.Engine - INFO - [cached since 12.28s ago] ('%1%', '%1%', '%1%', 10)
2024-03-04 11:31:58,754: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:32:05,594: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:32:05,594: multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2024-03-04 11:32:05,595: multipart.multipart - DEBUG - Calling on_header_value with data[63:85]
2024-03-04 11:32:05,595: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:32:05,595: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:32:05,595: multipart.multipart - DEBUG - Calling on_part_data with data[89:90]
2024-03-04 11:32:05,596: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:32:05,596: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:32:05,596: multipart.multipart - DEBUG - Calling on_header_field with data[134:153]
2024-03-04 11:32:05,596: multipart.multipart - DEBUG - Calling on_header_value with data[155:179]
2024-03-04 11:32:05,596: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:32:05,597: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:32:05,597: multipart.multipart - DEBUG - Calling on_part_data with data[183:193]
2024-03-04 11:32:05,597: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:32:05,597: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:32:05,597: multipart.multipart - DEBUG - Calling on_header_field with data[237:256]
2024-03-04 11:32:05,597: multipart.multipart - DEBUG - Calling on_header_value with data[258:284]
2024-03-04 11:32:05,598: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:32:05,598: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:32:05,598: multipart.multipart - DEBUG - Calling on_part_data with data[288:289]
2024-03-04 11:32:05,598: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:32:05,598: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:32:05,599: multipart.multipart - DEBUG - Calling on_header_field with data[333:352]
2024-03-04 11:32:05,599: multipart.multipart - DEBUG - Calling on_header_value with data[354:380]
2024-03-04 11:32:05,599: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:32:05,599: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:32:05,599: multipart.multipart - DEBUG - Calling on_part_data with data[384:385]
2024-03-04 11:32:05,600: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:32:05,600: multipart.multipart - DEBUG - Calling on_part_begin with no data
2024-03-04 11:32:05,600: multipart.multipart - DEBUG - Calling on_header_field with data[429:448]
2024-03-04 11:32:05,600: multipart.multipart - DEBUG - Calling on_header_value with data[450:472]
2024-03-04 11:32:05,600: multipart.multipart - DEBUG - Calling on_header_end with no data
2024-03-04 11:32:05,600: multipart.multipart - DEBUG - Calling on_headers_finished with no data
2024-03-04 11:32:05,601: multipart.multipart - DEBUG - Calling on_part_data with data[476:480]
2024-03-04 11:32:05,601: multipart.multipart - DEBUG - Calling on_part_end with no data
2024-03-04 11:32:05,601: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:32:05,602: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:32:05,603: sqlalchemy.engine.Engine - INFO - INSERT INTO attend (user_id, date_v, visiting, semester, confirmed) VALUES ($1::INTEGER, $2::DATE, $3::INTEGER, $4::INTEGER, $5::BOOLEAN) RETURNING attend.id
2024-03-04 11:32:05,603: sqlalchemy.engine.Engine - INFO - [cached since 11.64s ago] (1, datetime.date(2024, 3, 7), 1, 2, False)
2024-03-04 11:32:05,606: sqlalchemy.engine.Engine - INFO - COMMIT
2024-03-04 11:32:05,627: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:32:05,628: sqlalchemy.engine.Engine - INFO - SELECT count(attend.id) AS count_1 
FROM attend
2024-03-04 11:32:05,628: sqlalchemy.engine.Engine - INFO - [cached since 23.66s ago] ()
2024-03-04 11:32:05,631: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:32:05,633: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:32:05,634: sqlalchemy.engine.Engine - INFO - SELECT attend.id, attend.user_id, attend.date_v, attend.visiting, attend.semester, attend.confirmed 
FROM attend ORDER BY attend.id ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:32:05,635: sqlalchemy.engine.Engine - INFO - [cached since 23.66s ago] (10, 0)
2024-03-04 11:32:05,638: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:32:10,006: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:32:10,008: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE "user".id = $1::INTEGER
2024-03-04 11:32:10,009: sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] (1,)
2024-03-04 11:32:10,015: sqlalchemy.engine.Engine - INFO - SELECT attend.id, attend.user_id, attend.date_v, attend.visiting, attend.semester, attend.confirmed 
FROM attend 
WHERE attend.user_id = $1::INTEGER
2024-03-04 11:32:10,016: sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] (1,)
2024-03-04 11:32:10,019: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:32:41,465: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:32:41,502: sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2024-03-04 11:32:41,503: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:32:41,506: sqlalchemy.engine.Engine - INFO - select current_schema()
2024-03-04 11:32:41,506: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:32:41,509: sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2024-03-04 11:32:41,509: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:32:41,512: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:32:41,515: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE "user".id = $1::INTEGER
2024-03-04 11:32:41,515: sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] (1,)
2024-03-04 11:32:41,521: sqlalchemy.engine.Engine - INFO - SELECT attend.id, attend.user_id, attend.date_v, attend.visiting, attend.semester, attend.confirmed 
FROM attend 
WHERE attend.user_id = $1::INTEGER
2024-03-04 11:32:41,521: sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] (1,)
2024-03-04 11:32:41,525: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:34:57,586: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:34:57,649: sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2024-03-04 11:34:57,649: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:34:57,653: sqlalchemy.engine.Engine - INFO - select current_schema()
2024-03-04 11:34:57,653: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:34:57,657: sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2024-03-04 11:34:57,658: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:34:57,660: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:34:57,662: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE "user".id = $1::INTEGER
2024-03-04 11:34:57,663: sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] (1,)
2024-03-04 11:34:57,668: sqlalchemy.engine.Engine - INFO - SELECT attend.id, attend.user_id, attend.date_v, attend.visiting, attend.semester, attend.confirmed 
FROM attend 
WHERE attend.user_id = $1::INTEGER
2024-03-04 11:34:57,668: sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] (1,)
2024-03-04 11:34:57,671: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:36:30,728: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:30,728: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,272: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,273: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,273: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,274: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,274: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,274: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,275: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,275: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,275: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,276: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,276: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,276: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,277: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,277: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,277: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,278: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,278: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,279: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,279: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,279: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,280: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,280: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,280: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,281: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,281: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,281: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,282: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,282: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,282: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,284: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,284: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,284: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,285: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,285: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:43,285: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:54,289: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:36:54,291: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,629: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,630: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,630: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,630: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,631: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,631: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,647: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,662: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,664: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,678: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,694: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,695: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,695: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,696: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,697: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,710: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,726: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,727: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,729: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,739: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,755: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,771: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,772: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,773: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,787: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,788: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,789: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,802: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,803: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,818: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,833: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,834: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,835: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,836: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:01,837: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:37,727: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:37,728: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:37,864: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:37:37,902: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 11:37:37,903: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 11:37:37,903: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 11:37:38,167: root - INFO - User 2 has registered.
2024-03-04 11:37:38,173: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:37:38,444: root - INFO - User 3 has registered.
2024-03-04 11:37:38,448: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:37:38,482: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 11:37:38,747: root - INFO - User 4 has registered.
2024-03-04 11:37:38,750: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:37:38,754: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:37:38,754: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 11:37:38,754: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:37:38,754: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:37:38,754: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 11:37:38,754: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 11:37:38,754: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:37:38,754: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:37:38,754: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 11:37:38,754: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 11:37:38,755: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:37:38,755: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:37:38,755: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 11:37:38,755: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:37:38,755: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:37:38,755: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 11:37:38,755: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:37:38,755: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:37:38,755: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 11:37:38,755: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:37:38,755: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:37:38,994: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 11:37:39,040: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 11:37:39,078: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:37:39,084: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:37:43,235: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::38b8acdc39c69160d037af885bd4a941' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:37:47,333: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::38b8acdc39c69160d037af885bd4a941' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:37:47,341: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 11:37:47,403: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:37:47,473: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 11:37:47,474: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:37:47,527: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:37:47,562: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:37:47,565: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:37:47,607: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:37:47,644: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 11:37:47,647: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:37:47,692: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:37:47,729: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 11:37:47,733: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:37:47,772: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:37:47,819: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 11:37:47,822: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:37:47,863: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 11:37:47,906: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:37:47,951: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 11:37:47,987: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:37:48,023: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 11:37:48,026: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 11:37:48,140: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:37:48,143: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:37:48,188: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:37:48,227: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:37:48,276: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 11:37:48,313: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:37:48,348: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:37:48,383: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:37:48,417: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:37:48,451: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 11:37:48,456: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 11:37:52,570: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::d5fc20efb6d5b12ba1b750f7d3eb5386' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:37:56,665: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::d5fc20efb6d5b12ba1b750f7d3eb5386' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:37:56,672: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 11:37:56,730: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 11:37:56,735: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 11:37:56,769: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 11:37:56,772: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:37:56,818: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:37:56,894: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 11:37:56,967: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:37:56,970: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:37:56,971: httpx - INFO - HTTP Request: GET http://test/user/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:37:57,122: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 11:37:57,185: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,185: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,186: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,186: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,199: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,199: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,199: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,200: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,200: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,200: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,201: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,201: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,202: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,202: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,202: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,214: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,214: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,215: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,215: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,216: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,229: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,230: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,230: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,231: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,231: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,232: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,245: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,246: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,260: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,261: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,262: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,263: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,263: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,264: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:37:57,265: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:38:52,706: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:38:52,707: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:38:52,840: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:38:52,875: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 11:38:52,876: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 11:38:52,876: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 11:38:53,126: root - INFO - User 2 has registered.
2024-03-04 11:38:53,130: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:38:53,409: root - INFO - User 3 has registered.
2024-03-04 11:38:53,412: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:38:53,450: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 11:38:53,725: root - INFO - User 4 has registered.
2024-03-04 11:38:53,728: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:38:53,730: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:38:53,730: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 11:38:53,730: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:38:53,730: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:38:53,730: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 11:38:53,730: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:38:53,731: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:38:53,732: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 11:38:53,732: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:38:53,732: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:38:53,971: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 11:38:54,016: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 11:38:54,053: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:38:54,056: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:38:58,159: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::d054ab3e33e33485710404522f417d7f' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:39:02,242: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::d054ab3e33e33485710404522f417d7f' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:39:02,249: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 11:39:02,311: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:39:02,380: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 11:39:02,382: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:39:02,423: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:39:02,460: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:39:02,464: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:39:02,504: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:39:02,544: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 11:39:02,547: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:39:02,587: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:39:02,624: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 11:39:02,626: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:39:02,664: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:39:02,701: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 11:39:02,704: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:39:02,743: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 11:39:02,782: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:39:02,830: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 11:39:02,865: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:39:02,899: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 11:39:02,902: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 11:39:03,013: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:39:03,015: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:39:03,054: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:39:03,092: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:39:03,137: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 11:39:03,175: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:39:03,209: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:39:03,242: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:39:03,275: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:39:03,307: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 11:39:03,310: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 11:39:07,410: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::2a732dd5805a5227d1f265421fa1a61c' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:39:11,502: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::2a732dd5805a5227d1f265421fa1a61c' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:39:11,514: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 11:39:11,560: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 11:39:11,564: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 11:39:11,600: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 11:39:11,603: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:39:11,646: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:39:11,725: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 11:39:11,800: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:39:11,802: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:39:11,804: httpx - INFO - HTTP Request: GET http://test/user/get_attendance_status_user?user_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:39:11,959: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 11:39:12,020: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,021: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,042: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,043: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,043: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,044: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,044: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,044: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,057: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,057: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,058: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,058: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,059: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,059: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,059: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,060: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,060: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,060: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,072: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,074: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,088: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,090: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,091: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,092: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,092: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,093: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,093: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,093: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,094: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,094: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,095: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,095: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,120: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,136: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:39:12,137: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:20,055: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:20,056: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:20,182: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:41:20,217: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 11:41:20,218: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 11:41:20,218: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 11:41:20,467: root - INFO - User 2 has registered.
2024-03-04 11:41:20,470: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:41:20,737: root - INFO - User 3 has registered.
2024-03-04 11:41:20,741: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:41:20,775: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 11:41:21,045: root - INFO - User 4 has registered.
2024-03-04 11:41:21,048: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:41:21,050: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:41:21,050: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 11:41:21,050: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:41:21,050: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:41:21,050: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 11:41:21,050: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 11:41:21,050: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:41:21,050: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:41:21,051: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 11:41:21,051: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 11:41:21,051: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:41:21,051: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:41:21,051: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 11:41:21,051: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:41:21,051: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:41:21,051: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 11:41:21,051: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:41:21,051: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:41:21,051: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 11:41:21,052: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:41:21,052: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:41:21,282: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 11:41:21,327: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 11:41:21,364: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:41:21,368: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:41:25,473: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::0dee91aa8451603fa36bce3ee3b16485' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:41:29,558: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::0dee91aa8451603fa36bce3ee3b16485' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:41:29,565: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 11:41:29,618: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:41:29,686: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 11:41:29,687: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:41:29,728: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:41:29,764: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:41:29,767: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:41:29,808: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:41:29,844: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 11:41:29,847: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:41:29,887: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:41:29,922: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 11:41:29,925: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:41:29,966: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:41:30,001: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 11:41:30,004: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:41:30,044: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 11:41:30,081: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:41:30,129: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 11:41:30,168: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:41:30,202: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 11:41:30,206: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 11:41:30,319: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:41:30,321: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:41:30,362: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:41:30,400: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:41:30,445: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 11:41:30,483: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:41:30,517: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:41:30,552: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:41:30,584: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:41:30,616: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 11:41:30,619: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 11:41:34,732: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::164bcc6bee30266787ba5ecc9c6253dd' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:41:38,810: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::164bcc6bee30266787ba5ecc9c6253dd' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:41:38,817: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 11:41:38,867: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 11:41:38,869: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 11:41:38,901: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 11:41:38,905: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:41:38,948: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:41:39,025: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 11:41:39,097: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:41:39,099: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:41:39,477: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 11:41:39,549: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,567: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,567: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,568: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,568: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,568: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,569: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,569: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,569: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,570: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,570: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,571: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,571: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,582: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,582: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,583: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,583: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,583: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,585: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,585: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,586: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,586: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,586: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,587: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,598: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,614: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,630: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,631: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,645: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,646: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,647: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,648: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,649: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,650: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:41:39,650: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:43:54,015: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:43:54,017: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:43:54,160: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:43:54,199: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 11:43:54,200: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 11:43:54,200: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 11:43:54,501: root - INFO - User 2 has registered.
2024-03-04 11:43:54,506: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:43:54,811: root - INFO - User 3 has registered.
2024-03-04 11:43:54,813: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:43:54,851: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 11:43:55,122: root - INFO - User 4 has registered.
2024-03-04 11:43:55,124: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:43:55,126: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:43:55,127: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 11:43:55,127: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:43:55,127: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:43:55,127: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 11:43:55,127: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 11:43:55,127: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:43:55,127: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:43:55,127: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 11:43:55,127: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 11:43:55,127: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:43:55,127: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:43:55,128: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 11:43:55,128: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:43:55,128: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:43:55,128: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 11:43:55,128: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:43:55,128: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:43:55,128: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 11:43:55,128: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:43:55,128: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:43:55,370: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 11:43:55,418: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 11:43:55,455: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:43:55,458: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:43:59,567: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::b26c545367d828383b3f1c0e14527ffd' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:44:03,659: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::b26c545367d828383b3f1c0e14527ffd' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:44:03,665: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 11:44:03,726: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:44:03,811: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 11:44:03,812: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:03,865: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:44:03,912: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:44:03,915: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:03,961: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:44:03,998: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 11:44:04,001: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:04,043: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:44:04,082: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 11:44:04,085: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:04,125: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:44:04,160: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 11:44:04,164: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:04,203: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 11:44:04,240: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:04,288: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 11:44:04,326: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:04,359: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 11:44:04,361: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 11:44:04,470: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:44:04,472: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:04,511: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:44:04,549: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:44:04,593: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 11:44:04,630: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:04,664: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:04,698: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:04,731: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:04,764: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 11:44:04,767: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 11:44:08,878: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::950090e18123818d10f7a4e8a1cbc774' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:44:12,958: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::950090e18123818d10f7a4e8a1cbc774' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:44:12,965: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 11:44:13,024: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 11:44:13,027: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:13,065: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 11:44:13,068: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:13,117: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:44:13,190: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 11:44:13,263: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:44:13,265: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:13,303: httpx - INFO - HTTP Request: GET http://test/user/get_attendance_status_user?user_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:13,447: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 11:44:13,505: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,506: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,506: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,507: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,507: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,507: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,508: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,508: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,508: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,510: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,510: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,510: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,511: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,511: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,512: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,512: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,512: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,513: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,513: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,513: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,514: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,514: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,514: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,515: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,515: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,515: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,516: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,516: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,517: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,517: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,517: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,518: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,518: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,518: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:13,519: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:42,171: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:42,172: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:44:42,322: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:44:42,357: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 11:44:42,358: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 11:44:42,358: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 11:44:42,611: root - INFO - User 2 has registered.
2024-03-04 11:44:42,614: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:44:42,891: root - INFO - User 3 has registered.
2024-03-04 11:44:42,894: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:44:42,929: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 11:44:43,206: root - INFO - User 4 has registered.
2024-03-04 11:44:43,208: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:44:43,211: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:44:43,212: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 11:44:43,212: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:44:43,212: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:44:43,213: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 11:44:43,213: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 11:44:43,213: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:44:43,213: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:44:43,213: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 11:44:43,213: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 11:44:43,213: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:44:43,213: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:44:43,213: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 11:44:43,213: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:44:43,213: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:44:43,214: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 11:44:43,214: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:44:43,214: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:44:43,214: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 11:44:43,215: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:44:43,215: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:44:43,491: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 11:44:43,548: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 11:44:43,596: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:44:43,601: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:47,694: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::515dfc79bc9dd353aa3be5ddd0d2ae65' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:44:51,795: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::515dfc79bc9dd353aa3be5ddd0d2ae65' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:44:51,802: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 11:44:51,869: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:44:51,940: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 11:44:51,941: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:51,988: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:44:52,023: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:44:52,026: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:52,068: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:44:52,107: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 11:44:52,111: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:52,151: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:44:52,186: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 11:44:52,189: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:52,230: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:44:52,268: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 11:44:52,271: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:52,313: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 11:44:52,351: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:52,398: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 11:44:52,436: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:52,470: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 11:44:52,472: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 11:44:52,586: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:44:52,588: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:44:52,630: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:44:52,670: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:44:52,721: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 11:44:52,763: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:52,797: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:52,830: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:52,863: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:44:52,897: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 11:44:52,900: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 11:44:57,017: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::6305a39cace14720d9a6cc6416fcc852' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:44:59,064: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:44:59,064: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-04 11:44:59,064: multipart.multipart - DEBUG - Calling on_field_data with data[9:14]
2024-03-04 11:44:59,065: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:44:59,065: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:44:59,065: multipart.multipart - DEBUG - Calling on_field_name with data[15:23]
2024-03-04 11:44:59,065: multipart.multipart - DEBUG - Calling on_field_data with data[24:56]
2024-03-04 11:44:59,066: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:44:59,066: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:45:00,489: sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2024-03-04 11:45:00,489: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:45:00,493: sqlalchemy.engine.Engine - INFO - select current_schema()
2024-03-04 11:45:00,494: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:45:00,497: sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2024-03-04 11:45:00,498: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-04 11:45:00,501: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:00,503: sqlalchemy.engine.Engine - INFO - SELECT count("user".id) AS count_1 
FROM "user"
2024-03-04 11:45:00,503: sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ()
2024-03-04 11:45:00,506: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:00,508: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:00,511: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" ORDER BY "user".id ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:45:00,512: sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] (10, 0)
2024-03-04 11:45:00,516: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:01,103: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::6305a39cace14720d9a6cc6416fcc852' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:45:01,110: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 11:45:01,178: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 11:45:01,181: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 11:45:01,244: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 11:45:01,248: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:45:01,321: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:45:01,349: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:01,351: sqlalchemy.engine.Engine - INFO - SELECT count(subject.id) AS count_1 
FROM subject
2024-03-04 11:45:01,351: sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ()
2024-03-04 11:45:01,355: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:01,356: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:01,358: sqlalchemy.engine.Engine - INFO - SELECT subject.id, subject.platoon_id, subject.semester, subject.admin_id, subject.name 
FROM subject ORDER BY subject.id ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:45:01,358: sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] (10, 0)
2024-03-04 11:45:01,361: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:01,454: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 11:45:01,580: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:45:01,583: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:45:01,649: httpx - INFO - HTTP Request: GET http://test/user/get_attendance_status_user?user_id=2 "HTTP/1.1 404 Not Found"
2024-03-04 11:45:01,992: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 11:45:02,079: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,081: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,099: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,114: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,129: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,130: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,130: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,131: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,132: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,132: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,134: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,135: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,135: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,136: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,137: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,137: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,160: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,176: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,192: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,193: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,194: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,195: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,196: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,197: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,198: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,199: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,199: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:02,199: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,200: sqlalchemy.engine.Engine - INFO - SELECT count(student.id) AS count_1 
FROM student
2024-03-04 11:45:02,200: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,200: sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ()
2024-03-04 11:45:02,201: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,202: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,203: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,204: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,205: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,205: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:02,205: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,206: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:02,207: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:02,209: sqlalchemy.engine.Engine - INFO - SELECT student.id, student.name, student.phone, student.date_of_birth, student.mail, student.address, student.institute, student.direction_of_study, student.group_study, student.platoon_number, student.vus, student.squad_number, student.telegram_id, student.token, student.role 
FROM student ORDER BY student.id ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:45:02,209: sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] (10, 0)
2024-03-04 11:45:02,214: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:02,818: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:02,819: sqlalchemy.engine.Engine - INFO - SELECT count(schedule.id) AS count_1 
FROM schedule
2024-03-04 11:45:02,820: sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ()
2024-03-04 11:45:02,825: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:02,827: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:02,830: sqlalchemy.engine.Engine - INFO - SELECT schedule.id, schedule.aud, schedule.platoon_number, schedule.day_id, day_1.id AS id_1, day_1.date, day_1.weekday, day_1.semester, day_1.holiday 
FROM schedule LEFT OUTER JOIN day AS day_1 ON day_1.id = schedule.day_id ORDER BY schedule.id ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:45:02,831: sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] (10, 0)
2024-03-04 11:45:02,835: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:03,338: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:03,339: sqlalchemy.engine.Engine - INFO - SELECT count(platoon.platoon_number) AS count_1 
FROM platoon
2024-03-04 11:45:03,340: sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ()
2024-03-04 11:45:03,343: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:03,345: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:03,346: sqlalchemy.engine.Engine - INFO - SELECT platoon.platoon_number, platoon.vus, platoon.semester 
FROM platoon ORDER BY platoon.platoon_number ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:45:03,347: sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] (10, 0)
2024-03-04 11:45:03,350: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:04,908: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:04,909: sqlalchemy.engine.Engine - INFO - SELECT count(grading.id) AS count_1 
FROM grading
2024-03-04 11:45:04,910: sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ()
2024-03-04 11:45:04,914: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:04,916: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:04,917: sqlalchemy.engine.Engine - INFO - SELECT grading.id, grading.subj_id, grading.user_id, grading.mark, grading.mark_date, grading.theme 
FROM grading ORDER BY grading.id ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:45:04,918: sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] (10, 0)
2024-03-04 11:45:04,922: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:05,801: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:05,802: sqlalchemy.engine.Engine - INFO - SELECT count(attend.id) AS count_1 
FROM attend
2024-03-04 11:45:05,802: sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ()
2024-03-04 11:45:05,807: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:05,809: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:05,810: sqlalchemy.engine.Engine - INFO - SELECT attend.id, attend.user_id, attend.date_v, attend.visiting, attend.semester, attend.confirmed 
FROM attend ORDER BY attend.id ASC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2024-03-04 11:45:05,811: sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] (10, 0)
2024-03-04 11:45:05,815: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:07,306: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:45:07,310: sqlalchemy.engine.Engine - INFO - SELECT attend.id, attend.user_id, attend.date_v, attend.visiting, attend.semester, attend.confirmed, user_1.id AS id_1, user_1.name, user_1.phone, user_1.date_of_birth, user_1.address, user_1.institute, user_1.direction_of_study, user_1.platoon_number, user_1.squad_number, user_1.role, user_1.telegram_id, user_1.token, user_1.group_study, user_1.email, user_1.registered_at, user_1.hashed_password, user_1.is_active, user_1.is_superuser, user_1.is_verified 
FROM attend LEFT OUTER JOIN "user" AS user_1 ON user_1.id = attend.user_id 
WHERE attend.id = $1::INTEGER
2024-03-04 11:45:07,311: sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] (1,)
2024-03-04 11:45:07,316: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 11:45:52,719: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:52,720: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:45:52,877: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:45:52,912: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 11:45:52,914: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 11:45:52,914: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 11:45:53,161: root - INFO - User 2 has registered.
2024-03-04 11:45:53,164: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:45:53,442: root - INFO - User 3 has registered.
2024-03-04 11:45:53,445: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:45:53,484: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 11:45:53,764: root - INFO - User 4 has registered.
2024-03-04 11:45:53,767: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:45:53,769: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:45:53,769: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 11:45:53,769: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:45:53,770: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 11:45:53,772: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:45:53,772: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:45:53,772: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 11:45:53,772: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:45:53,772: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:45:54,006: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 11:45:54,058: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 11:45:54,096: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:45:54,099: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:45:58,215: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::48093aa7fc6d7abc81df5900a290fbb1' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:46:02,297: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::48093aa7fc6d7abc81df5900a290fbb1' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:46:02,304: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 11:46:02,369: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:46:02,441: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 11:46:02,442: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:02,487: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:46:02,524: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:46:02,527: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:02,569: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:46:02,608: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 11:46:02,611: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:02,651: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:46:02,687: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 11:46:02,691: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:02,732: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:46:02,770: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 11:46:02,773: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:02,812: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 11:46:02,849: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:02,897: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 11:46:02,935: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:02,968: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 11:46:02,971: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 11:46:03,082: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:46:03,085: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:03,122: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:46:03,159: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:46:03,206: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 11:46:03,242: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:03,276: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:03,310: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:03,343: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:03,375: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 11:46:03,377: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 11:46:07,472: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::b09759f95c1c6bd733baa67eb4889b85' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:46:11,558: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::b09759f95c1c6bd733baa67eb4889b85' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:46:11,565: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 11:46:11,617: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 11:46:11,621: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:11,655: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 11:46:11,658: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:11,703: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:46:11,827: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 11:46:11,901: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:46:11,904: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:11,978: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:46:12,126: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 11:46:12,195: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,196: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,197: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,197: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,197: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,198: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,198: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,198: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,200: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,200: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,200: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,201: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,201: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,202: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,202: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,202: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,203: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,203: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,203: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,204: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,204: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,204: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,221: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,221: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,222: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,222: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,222: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,223: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,223: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,223: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,224: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,224: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,224: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,225: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:12,225: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:48,041: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:48,043: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:46:48,181: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:46:48,216: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 11:46:48,217: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 11:46:48,218: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 11:46:48,469: root - INFO - User 2 has registered.
2024-03-04 11:46:48,472: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:46:48,745: root - INFO - User 3 has registered.
2024-03-04 11:46:48,748: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:46:48,783: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 11:46:49,061: root - INFO - User 4 has registered.
2024-03-04 11:46:49,077: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:46:49,077: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:46:49,356: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 11:46:49,408: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 11:46:49,452: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:46:49,456: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:53,579: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::1b0f4bca1abcf27063c887a1db4c3e6a' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:46:57,643: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::1b0f4bca1abcf27063c887a1db4c3e6a' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:46:57,649: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 11:46:57,693: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:46:57,776: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 11:46:57,776: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:57,818: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:46:57,854: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:46:57,857: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:57,898: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:46:57,934: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 11:46:57,937: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:57,976: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:46:58,011: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 11:46:58,015: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:58,054: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:46:58,089: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 11:46:58,092: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:58,133: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 11:46:58,168: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:58,210: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 11:46:58,249: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:58,282: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 11:46:58,285: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 11:46:58,394: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:46:58,398: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:46:58,437: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:46:58,475: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:46:58,519: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 11:46:58,556: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:58,591: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:58,631: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:58,665: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:46:58,702: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 11:46:58,706: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 11:47:02,798: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::e503abcd1bd54c039d559900719801ac' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:47:06,862: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::e503abcd1bd54c039d559900719801ac' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:47:06,867: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 11:47:06,918: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 11:47:06,923: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:06,961: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 11:47:06,964: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:07,010: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:47:07,109: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 11:47:07,181: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:47:07,183: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:07,266: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:47:07,303: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 11:47:07,363: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,364: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,364: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,365: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,365: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,365: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,367: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,367: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,368: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,368: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,368: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,369: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,369: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,369: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,382: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,382: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,382: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,383: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,383: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,384: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,384: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,384: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,385: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,385: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,385: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,386: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,386: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,387: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,387: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,387: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,413: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,413: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,414: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,414: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:07,414: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:16,207: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:16,208: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:16,339: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:47:16,373: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 11:47:16,374: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 11:47:16,374: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 11:47:16,630: root - INFO - User 2 has registered.
2024-03-04 11:47:16,633: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:47:16,915: root - INFO - User 3 has registered.
2024-03-04 11:47:16,918: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:47:16,955: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 11:47:17,223: root - INFO - User 4 has registered.
2024-03-04 11:47:17,226: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:47:17,229: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:47:17,229: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 11:47:17,229: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:47:17,229: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:47:17,229: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 11:47:17,229: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 11:47:17,229: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 11:47:17,230: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:47:17,231: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:47:17,469: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 11:47:17,524: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 11:47:17,564: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:47:17,567: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:21,664: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::b1f678468632deb095377dfe4ec0ea75' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:47:25,736: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::b1f678468632deb095377dfe4ec0ea75' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:47:25,743: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 11:47:25,802: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:47:25,881: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 11:47:25,882: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:25,928: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:47:25,964: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:47:25,967: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:26,010: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:47:26,047: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 11:47:26,050: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:26,087: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:47:26,123: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 11:47:26,126: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:26,166: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:47:26,201: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 11:47:26,204: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:26,245: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 11:47:26,281: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:47:26,331: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 11:47:26,366: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:47:26,400: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 11:47:26,403: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 11:47:26,516: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:47:26,518: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:26,558: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:47:26,595: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:47:26,642: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 11:47:26,680: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:47:26,712: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:47:26,745: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:47:26,779: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:47:26,812: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 11:47:26,815: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 11:47:30,940: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::9edc030e5eb5cdaba6b05f72db19740b' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:47:35,032: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::9edc030e5eb5cdaba6b05f72db19740b' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:47:35,038: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 11:47:35,103: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 11:47:35,107: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:35,143: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 11:47:35,147: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:35,199: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:47:35,282: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 11:47:35,367: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:47:35,369: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:35,456: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:47:35,494: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 125, in get_attendance_status_user
    attendances = await DatabaseWorker(session).get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 43, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 11:47:35,497: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:47:35,534: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 11:47:35,595: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,596: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,596: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,597: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,597: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,598: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,598: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,598: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,600: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,600: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,600: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,601: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,601: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,601: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,602: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,602: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,602: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,603: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,603: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,604: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,604: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,604: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,623: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,623: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,623: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,624: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,624: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,625: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,625: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,625: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,639: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,639: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,655: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,656: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,670: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:47:35,672: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:50:59,828: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:50:59,829: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:00,010: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:51:00,059: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 11:51:00,059: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 11:51:00,060: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 11:51:00,348: root - INFO - User 2 has registered.
2024-03-04 11:51:00,352: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:51:00,673: root - INFO - User 3 has registered.
2024-03-04 11:51:00,676: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:51:00,716: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 11:51:00,990: root - INFO - User 4 has registered.
2024-03-04 11:51:00,993: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:51:00,996: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:51:00,996: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 11:51:00,996: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:51:00,996: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:51:00,996: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 11:51:00,996: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 11:51:00,996: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:51:00,996: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:51:00,997: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 11:51:00,997: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 11:51:00,997: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:51:00,997: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:51:00,997: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 11:51:00,997: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:51:00,997: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:51:00,997: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 11:51:00,997: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:51:00,997: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:51:00,997: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 11:51:00,998: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:51:00,998: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:51:01,235: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 11:51:01,283: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 11:51:01,320: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:51:01,323: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:51:05,470: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::65e0ff09edc8dfec4710f38b52354e98' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:51:09,561: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::65e0ff09edc8dfec4710f38b52354e98' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:51:09,569: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 11:51:09,615: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:51:09,685: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 11:51:09,686: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:51:09,725: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:51:09,763: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:51:09,766: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:51:09,806: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:51:09,845: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 11:51:09,848: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:51:09,885: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:51:09,920: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 11:51:09,924: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:51:09,961: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:51:09,999: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 11:51:10,002: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:51:10,041: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 11:51:10,078: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:51:10,122: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 11:51:10,159: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:51:10,192: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 11:51:10,196: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 11:51:10,306: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:51:10,308: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:51:10,349: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:51:10,388: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:51:10,435: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 11:51:10,472: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:51:10,506: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:51:10,541: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:51:10,573: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:51:10,608: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 11:51:10,611: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 11:51:14,736: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::73b4a22b50eeb38b03bdc076efb4c0ee' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:51:18,797: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::73b4a22b50eeb38b03bdc076efb4c0ee' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:51:18,804: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 11:51:18,856: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 11:51:18,859: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 11:51:18,894: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 11:51:18,898: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:51:18,943: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:51:19,023: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 11:51:19,096: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:51:19,098: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:51:19,172: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:51:19,208: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 125, in get_attendance_status_user
    attendances = await DatabaseWorker(session).get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 43, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 11:51:19,211: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:51:19,252: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 11:51:19,311: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,311: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,312: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,312: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,313: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,313: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,313: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,314: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,314: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,315: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,315: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,315: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,316: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,316: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,316: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,317: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,317: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,317: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,318: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,318: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,319: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,319: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,319: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,320: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,320: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,320: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,321: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,321: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,321: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,321: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,322: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,322: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,324: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,324: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,324: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:51:19,325: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:20,139: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:20,139: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:20,276: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:53:20,313: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 11:53:20,314: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 11:53:20,314: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 11:53:20,565: root - INFO - User 2 has registered.
2024-03-04 11:53:20,570: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:53:20,850: root - INFO - User 3 has registered.
2024-03-04 11:53:20,853: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:53:20,892: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 11:53:21,158: root - INFO - User 4 has registered.
2024-03-04 11:53:21,161: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 11:53:21,163: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:53:21,163: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 11:53:21,163: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:53:21,164: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:53:21,165: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 11:53:21,165: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:53:21,165: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 11:53:21,165: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 11:53:21,165: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 11:53:21,165: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 11:53:21,398: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 11:53:21,450: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 11:53:21,485: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:53:21,489: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:53:25,626: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::5adf9c95732f353935f9370fadf165f6' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:53:29,708: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::5adf9c95732f353935f9370fadf165f6' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:53:29,715: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 11:53:29,769: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:53:29,839: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 11:53:29,840: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:53:29,881: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 11:53:29,915: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 11:53:29,920: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:53:29,959: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:53:29,997: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 11:53:30,000: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:53:30,039: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 11:53:30,075: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 11:53:30,078: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:53:30,117: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:53:30,154: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 11:53:30,157: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 11:53:30,195: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 11:53:30,232: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:53:30,274: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 11:53:30,311: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:53:30,345: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 11:53:30,348: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 11:53:30,458: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:53:30,461: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:53:30,500: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:53:30,538: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 11:53:30,584: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 11:53:30,622: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:53:30,655: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:53:30,690: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:53:30,723: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 11:53:30,755: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 11:53:30,758: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 11:53:34,877: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::fe521432e56ebd56434536c77446ddbf' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:53:38,969: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::fe521432e56ebd56434536c77446ddbf' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 11:53:38,976: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 11:53:39,036: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 11:53:39,041: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 11:53:39,077: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 11:53:39,080: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 11:53:39,129: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:53:39,209: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 11:53:39,282: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 11:53:39,285: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:53:39,360: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 11:53:39,396: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 125, in get_attendance_status_user
    attendances = await DatabaseWorker(session).get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 43, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 11:53:39,399: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 11:53:39,436: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 11:53:39,497: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,499: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,499: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,500: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,500: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,501: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,501: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,501: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,502: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,502: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,502: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,503: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,503: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,503: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,504: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,504: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,504: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,505: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,505: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,505: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,506: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,506: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,507: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,507: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,507: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,526: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,526: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,527: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,527: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,527: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,528: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,528: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,528: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,529: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,529: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:53:39,530: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 11:55:22,926: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 11:55:22,933: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-04 11:55:22,934: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE "user".id = $1::INTEGER
2024-03-04 11:55:22,935: sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] (1,)
2024-03-04 11:55:27,030: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::f688346a4290082dfec4ecb321693309' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1127, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379).
2024-03-04 11:55:27,034: sqlalchemy.engine.Engine - INFO - SELECT platoon.platoon_number, platoon.vus, platoon.semester 
FROM platoon
2024-03-04 11:55:27,035: sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ()
2024-03-04 11:55:31,129: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::f688346a4290082dfec4ecb321693309' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1127, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379).
2024-03-04 11:55:31,131: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-04 13:45:19,680: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:19,681: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:19,963: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 13:45:20,010: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 13:45:20,012: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 13:45:20,012: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 13:45:20,261: root - INFO - User 2 has registered.
2024-03-04 13:45:20,266: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:45:20,541: root - INFO - User 3 has registered.
2024-03-04 13:45:20,544: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:45:20,585: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 13:45:20,855: root - INFO - User 4 has registered.
2024-03-04 13:45:20,858: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:45:20,860: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:45:20,860: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 13:45:20,861: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:45:20,861: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:45:20,861: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 13:45:20,861: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 13:45:20,861: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:45:20,861: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:45:20,861: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 13:45:20,861: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 13:45:20,861: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:45:20,861: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:45:20,861: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 13:45:20,862: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:45:20,862: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:45:20,862: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 13:45:20,862: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:45:20,862: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:45:20,862: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 13:45:20,862: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:45:20,862: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 13:45:21,099: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 13:45:21,154: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 13:45:21,198: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 13:45:21,204: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:45:25,325: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::4cdeb2019d608521b88877ee93402000' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:45:29,449: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::4cdeb2019d608521b88877ee93402000' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:45:29,457: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 13:45:29,527: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 13:45:29,611: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 13:45:29,612: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:45:29,658: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 13:45:29,695: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 13:45:29,698: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:45:29,744: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 13:45:29,785: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 13:45:29,788: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:45:29,831: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 13:45:29,870: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 13:45:29,873: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:45:29,915: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 13:45:29,953: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 13:45:29,956: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:45:29,958: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 405 Method Not Allowed"
2024-03-04 13:45:30,067: httpx - INFO - HTTP Request: POST http://test/users/set_user_attr "HTTP/1.1 405 Method Not Allowed"
2024-03-04 13:45:30,074: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 405 Method Not Allowed"
2024-03-04 13:45:30,080: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 405 Method Not Allowed"
2024-03-04 13:45:30,204: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 13:45:30,206: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 13:45:30,251: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:45:30,293: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 13:45:30,295: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 405 Method Not Allowed"
2024-03-04 13:45:30,304: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 405 Method Not Allowed"
2024-03-04 13:45:34,438: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::4498d5307d3b3e32a9cdf9b615de9f18' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:45:38,534: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::4498d5307d3b3e32a9cdf9b615de9f18' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:45:38,540: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 13:45:38,600: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 13:45:38,605: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 13:45:38,644: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 13:45:38,647: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 13:45:38,692: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:45:38,773: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 13:45:38,849: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 13:45:38,851: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:45:38,934: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:45:38,979: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 125, in get_attendance_status_user
    attendances = await DatabaseWorker(session).get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 43, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 13:45:38,982: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:45:39,026: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 13:45:39,101: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,102: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,102: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,102: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,119: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,119: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,120: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,120: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,121: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,134: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,135: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,135: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,136: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,136: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,137: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,137: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,137: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,138: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,138: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,139: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,139: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,139: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,141: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,141: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,142: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,142: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,165: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,166: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,166: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,167: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,168: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,168: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,169: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,181: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,182: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:45:39,183: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:06,890: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:06,892: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:07,090: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 13:47:07,143: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 13:47:07,144: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 13:47:07,144: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 13:47:07,444: root - INFO - User 2 has registered.
2024-03-04 13:47:07,449: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:47:07,769: root - INFO - User 3 has registered.
2024-03-04 13:47:07,772: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:47:07,812: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 13:47:08,082: root - INFO - User 4 has registered.
2024-03-04 13:47:08,085: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:47:08,088: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:47:08,088: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 13:47:08,088: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:47:08,088: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:47:08,088: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 13:47:08,088: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:47:08,089: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:47:08,090: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 13:47:08,090: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:47:08,090: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 13:47:08,333: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 13:47:08,380: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 13:47:08,418: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 13:47:08,421: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:47:12,523: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::9c7efb1da18798be10b696188db4fa81' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:47:16,619: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::9c7efb1da18798be10b696188db4fa81' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:47:16,627: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 13:47:16,688: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 13:47:16,762: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 13:47:16,762: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:47:16,805: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 13:47:16,841: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 13:47:16,844: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:47:16,889: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 13:47:16,927: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 13:47:16,931: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:47:16,972: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 13:47:17,012: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 13:47:17,017: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:47:17,059: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 13:47:17,097: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 13:47:17,101: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:47:17,142: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 13:47:17,188: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:47:17,234: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 13:47:17,275: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:47:17,276: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 405 Method Not Allowed"
2024-03-04 13:47:17,504: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 13:47:17,506: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 13:47:17,547: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:47:17,587: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 13:47:17,637: httpx - INFO - HTTP Request: PATCH http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 13:47:17,675: httpx - INFO - HTTP Request: PATCH http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:47:17,676: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 405 Method Not Allowed"
2024-03-04 13:47:21,803: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::d0f9f30a774beab97a7701b3a9b0e6e6' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:47:25,899: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::d0f9f30a774beab97a7701b3a9b0e6e6' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:47:25,904: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 13:47:25,946: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 13:47:25,949: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 13:47:25,985: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 13:47:25,989: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 13:47:26,035: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:47:26,111: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 13:47:26,195: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 13:47:26,197: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:47:26,278: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:47:26,320: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 125, in get_attendance_status_user
    attendances = await DatabaseWorker(session).get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 43, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 13:47:26,323: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:47:26,366: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 13:47:26,431: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,432: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,432: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,433: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,434: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,434: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,435: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,435: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,435: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,436: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,436: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,437: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,456: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,456: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,457: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,457: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,457: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,458: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,458: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,458: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,459: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,459: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,460: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,460: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,460: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,462: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,462: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,462: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,463: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,463: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,464: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,464: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,464: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,465: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,465: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:47:26,465: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:06,547: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:06,548: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:06,687: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 13:49:06,722: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 13:49:06,723: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 13:49:06,723: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 13:49:06,973: root - INFO - User 2 has registered.
2024-03-04 13:49:06,978: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:49:07,253: root - INFO - User 3 has registered.
2024-03-04 13:49:07,256: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:49:07,296: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 13:49:07,572: root - INFO - User 4 has registered.
2024-03-04 13:49:07,576: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:49:07,578: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:07,578: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 13:49:07,578: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:07,578: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:07,578: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 13:49:07,579: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:07,580: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:07,580: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 13:49:07,580: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:07,580: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 13:49:07,814: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 13:49:07,867: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 13:49:07,906: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 13:49:07,909: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:12,001: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::f412773e62f015af987538febb58ad35' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:49:16,077: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::f412773e62f015af987538febb58ad35' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:49:16,084: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 13:49:16,144: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 13:49:16,215: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 13:49:16,215: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:16,258: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 13:49:16,295: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 13:49:16,298: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:16,339: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 13:49:16,375: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 13:49:16,379: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:16,420: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 13:49:16,458: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 13:49:16,461: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:16,502: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 13:49:16,537: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 13:49:16,540: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:16,580: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 13:49:16,618: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:49:16,666: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 13:49:16,705: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:49:16,705: httpx - INFO - HTTP Request: POST http://test/users/set_user_mail "HTTP/1.1 405 Method Not Allowed"
2024-03-04 13:49:16,932: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 13:49:16,934: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:16,973: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:49:17,013: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 13:49:17,060: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 13:49:17,098: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:49:17,133: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:49:17,166: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:49:17,200: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:49:17,232: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 13:49:17,236: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 13:49:21,332: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::2a52e8b87521003a0ec65733ee7539ae' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:49:25,405: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::2a52e8b87521003a0ec65733ee7539ae' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:49:25,412: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 13:49:25,460: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 13:49:25,464: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:25,498: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 13:49:25,501: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:25,546: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:49:25,622: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 13:49:25,696: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 13:49:25,698: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:25,773: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:49:25,825: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 125, in get_attendance_status_user
    attendances = await DatabaseWorker(session).get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 43, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 13:49:25,828: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:25,865: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 13:49:25,930: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,931: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,932: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,932: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,932: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,933: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,933: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,933: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,934: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,934: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,934: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,935: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,935: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,936: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,953: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,953: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,954: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,954: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,954: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,955: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,955: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,955: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,956: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,956: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,956: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,957: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,957: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,958: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,958: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,958: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,959: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,959: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,959: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,960: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,960: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:25,960: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:53,913: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:53,913: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:49:54,063: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 13:49:54,100: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 13:49:54,101: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 13:49:54,101: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 13:49:54,362: root - INFO - User 2 has registered.
2024-03-04 13:49:54,365: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:49:54,660: root - INFO - User 3 has registered.
2024-03-04 13:49:54,663: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:49:54,701: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 13:49:54,986: root - INFO - User 4 has registered.
2024-03-04 13:49:54,990: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 13:49:54,993: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:54,993: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 13:49:54,994: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:54,995: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:54,995: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 13:49:54,995: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:54,995: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 13:49:54,995: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 13:49:54,995: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 13:49:54,995: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 13:49:55,225: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 13:49:55,271: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 13:49:55,312: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await DatabaseWorker(session).get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 21, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 13:49:55,315: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:49:59,429: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::f93ead39b653e130fce818450805efbc' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:50:03,527: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::f93ead39b653e130fce818450805efbc' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:50:03,534: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 13:50:03,600: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 13:50:03,669: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 215, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 13:50:03,670: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:50:03,713: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 13:50:03,749: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 236, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 13:50:03,752: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:50:03,794: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 13:50:03,833: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 163, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 13:50:03,836: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:50:03,876: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 13:50:03,915: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 174, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 13:50:03,918: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:50:03,959: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 13:50:03,997: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 190, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 13:50:04,001: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 13:50:04,041: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 13:50:04,082: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:50:04,137: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 13:50:04,174: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:50:04,208: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 13:50:04,212: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 13:50:04,324: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 13:50:04,326: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 13:50:04,366: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:50:04,404: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 13:50:04,452: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 13:50:04,489: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:50:04,523: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:50:04,556: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:50:04,591: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 13:50:04,623: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 99, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 13:50:04,627: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 13:50:08,723: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::ad2fe9d3e5dec4555692a10cc648467e' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:50:12,811: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::ad2fe9d3e5dec4555692a10cc648467e' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 13:50:12,818: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 13:50:12,878: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 64, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 13:50:12,883: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 13:50:12,920: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 59, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 13:50:12,923: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 13:50:12,974: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:50:13,047: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 13:50:13,121: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 13:50:13,123: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:50:13,200: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 13:50:13,236: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 125, in get_attendance_status_user
    attendances = await DatabaseWorker(session).get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 43, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 13:50:13,240: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 13:50:13,279: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 13:50:13,342: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,342: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,343: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,343: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,344: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,344: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,344: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,345: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,345: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,345: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,346: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,346: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,347: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,347: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,347: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,348: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,368: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,368: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,368: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,369: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,369: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,370: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,370: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,370: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,371: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,371: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,371: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,372: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,372: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,372: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,384: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,384: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,385: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,385: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,385: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 13:50:13,386: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:27,290: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:27,291: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:27,433: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 14:12:27,468: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 14:12:27,469: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 14:12:27,469: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 14:12:27,758: root - INFO - User 2 has registered.
2024-03-04 14:12:27,762: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:12:28,101: root - INFO - User 3 has registered.
2024-03-04 14:12:28,104: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:12:28,156: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 14:12:28,448: root - INFO - User 4 has registered.
2024-03-04 14:12:28,451: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:12:28,453: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:12:28,453: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 14:12:28,453: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:12:28,453: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:12:28,453: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 14:12:28,454: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:12:28,455: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:12:28,455: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 14:12:28,455: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:12:28,455: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 14:12:28,689: root - INFO - User 2 has login.
2024-03-04 14:12:28,693: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 14:12:28,743: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 14:12:28,780: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 46, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 14:12:28,784: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:12:32,927: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::71f274e5be457b41ec7d0b440fe01b48' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:12:37,028: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::71f274e5be457b41ec7d0b440fe01b48' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:12:37,034: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 14:12:37,097: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 14:12:37,189: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 86, in get_platoons
    commander = await DatabaseWorker(session).get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 14:12:37,190: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:12:37,232: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 14:12:37,271: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 101, in get_count_squad_in_platoon
    count_squad = await DatabaseWorker(session).get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 14:12:37,274: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:12:37,317: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 14:12:37,357: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 14:12:37,361: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:12:37,402: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 14:12:37,438: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 14:12:37,442: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:12:37,481: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 14:12:37,520: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 14:12:37,523: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:12:37,564: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 14:12:37,603: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:12:37,651: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 14:12:37,690: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:12:37,723: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 14:12:37,727: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 14:12:37,839: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 14:12:37,842: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 14:12:37,886: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:12:37,926: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 14:12:37,974: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 14:12:38,010: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:12:38,045: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:12:38,079: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:12:38,113: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:12:38,146: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 41, in set_visit_user
    await DatabaseWorker(session).set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 14:12:38,150: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 14:12:42,252: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::ee4eb12ea48f27193bd253991a0431f7' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:12:46,331: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::ee4eb12ea48f27193bd253991a0431f7' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:12:46,339: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 14:12:46,399: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 14:12:46,402: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 14:12:46,436: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 14:12:46,441: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 14:12:46,484: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:12:46,561: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 14:12:46,635: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 14:12:46,638: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:12:46,711: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:12:46,750: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 125, in get_attendance_status_user
    attendances = await DatabaseWorker(session).get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 14:12:46,753: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:12:46,796: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 14:12:46,857: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,858: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,858: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,884: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,884: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,885: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,885: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,885: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,887: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,887: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,888: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,888: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,888: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,889: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,889: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,889: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,890: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,915: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,916: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,916: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,917: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,931: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,947: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,963: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,979: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,982: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:46,995: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:47,010: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:47,012: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:47,025: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:47,026: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:47,026: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:47,027: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:47,028: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:47,028: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:12:47,029: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:13,217: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:13,218: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:13,374: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 14:14:13,413: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 14:14:13,414: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 14:14:13,414: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 14:14:13,664: root - INFO - User 2 has registered.
2024-03-04 14:14:13,669: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:14:13,942: root - INFO - User 3 has registered.
2024-03-04 14:14:13,945: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:14:13,980: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 14:14:14,246: root - INFO - User 4 has registered.
2024-03-04 14:14:14,250: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:14:14,252: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:14:14,252: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 14:14:14,252: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:14:14,252: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:14:14,252: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 14:14:14,252: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 14:14:14,252: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:14:14,252: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:14:14,252: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 14:14:14,252: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 14:14:14,253: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:14:14,253: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:14:14,253: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 14:14:14,253: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:14:14,253: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:14:14,253: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 14:14:14,253: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:14:14,253: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:14:14,253: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 14:14:14,253: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:14:14,254: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 14:14:14,484: root - INFO - User 2 has login.
2024-03-04 14:14:14,488: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 14:14:14,575: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 14:14:14,610: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 44, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 14:14:14,613: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:14:18,724: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::e6496b8e0419e5a6cb20c061875d7785' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:14:22,801: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::e6496b8e0419e5a6cb20c061875d7785' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:14:22,807: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 14:14:22,847: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 14:14:22,948: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 84, in get_platoons
    commander = await db_worker.get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 14:14:22,949: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:14:22,991: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 14:14:23,028: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 99, in get_count_squad_in_platoon
    count_squad = await db_worker.get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 14:14:23,031: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:14:23,074: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 14:14:23,110: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await DatabaseWorker(session).get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 14:14:23,115: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:14:23,153: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 14:14:23,188: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 14:14:23,192: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:14:23,233: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 14:14:23,269: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 14:14:23,273: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:14:23,317: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 14:14:23,355: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:14:23,405: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 14:14:23,441: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:14:23,476: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 14:14:23,478: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 14:14:23,592: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 14:14:23,595: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 14:14:23,652: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:14:23,695: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 14:14:23,744: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 14:14:23,781: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:14:23,816: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:14:23,851: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:14:23,887: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:14:23,921: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 39, in set_visit_user
    await db_worker.set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 14:14:23,924: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 14:14:28,043: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::5db63c8da4e69b9bccafddad86cba678' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:14:32,131: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::5db63c8da4e69b9bccafddad86cba678' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:14:32,139: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 14:14:32,195: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 14:14:32,200: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 14:14:32,233: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 82, in get_gradings_by_student
    gradings = await DatabaseWorker(session).get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 14:14:32,237: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 14:14:32,286: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:14:32,427: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 14:14:32,595: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 14:14:32,598: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:14:32,723: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:14:32,760: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 125, in get_attendance_status_user
    attendances = await DatabaseWorker(session).get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 14:14:32,763: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:14:32,803: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 14:14:32,862: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,863: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,863: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,864: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,864: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,865: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,865: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,865: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,866: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,866: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,866: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,868: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,868: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,869: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,869: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,869: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,870: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,870: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,870: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,871: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,871: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,872: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,872: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,872: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,873: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,873: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,873: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,874: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,874: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,874: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,875: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,898: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,898: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,899: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,899: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:14:32,900: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:05,418: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:05,419: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:05,581: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 14:15:05,620: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 14:15:05,621: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 14:15:05,621: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 14:15:05,878: root - INFO - User 2 has registered.
2024-03-04 14:15:05,882: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:15:06,169: root - INFO - User 3 has registered.
2024-03-04 14:15:06,174: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:15:06,212: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 14:15:06,480: root - INFO - User 4 has registered.
2024-03-04 14:15:06,485: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:15:06,487: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:15:06,487: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 14:15:06,487: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:15:06,487: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:15:06,488: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 14:15:06,489: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:15:06,489: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:15:06,489: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 14:15:06,489: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:15:06,489: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 14:15:06,740: root - INFO - User 2 has login.
2024-03-04 14:15:06,746: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 14:15:06,833: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 14:15:06,870: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 44, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 14:15:06,875: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:15:10,980: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::b2ebbe91069c58cf4aac38e02b7fa22d' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:15:15,067: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::b2ebbe91069c58cf4aac38e02b7fa22d' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:15:15,073: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 14:15:15,127: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 14:15:15,198: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 84, in get_platoons
    commander = await db_worker.get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 14:15:15,199: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:15:15,239: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 14:15:15,275: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 99, in get_count_squad_in_platoon
    count_squad = await db_worker.get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 14:15:15,278: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:15:15,318: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 14:15:15,353: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
    role = await db_worker.get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 14:15:15,359: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:15:15,400: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 14:15:15,435: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
    user = await DatabaseWorker(session).get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 14:15:15,439: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:15:15,478: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 14:15:15,514: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
    user = await DatabaseWorker(session).get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 14:15:15,517: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:15:15,559: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 14:15:15,596: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:15:15,643: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 14:15:15,680: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:15:15,719: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 14:15:15,723: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 14:15:15,838: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 14:15:15,841: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 14:15:15,880: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:15:15,921: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 14:15:15,966: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 14:15:16,003: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:15:16,039: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:15:16,072: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:15:16,106: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:15:16,138: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 39, in set_visit_user
    await db_worker.set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 14:15:16,142: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 14:15:20,268: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::9db876f6a3b41b3c741986cfbfe947e6' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:15:24,367: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::9db876f6a3b41b3c741986cfbfe947e6' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:15:24,375: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 14:15:24,428: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 14:15:24,431: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 14:15:24,466: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 14:15:24,469: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 14:15:24,513: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:15:24,588: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 14:15:24,661: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 14:15:24,664: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:15:24,738: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:15:24,773: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 125, in get_attendance_status_user
    attendances = await DatabaseWorker(session).get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 14:15:24,778: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:15:24,815: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 14:15:24,883: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,884: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,885: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,885: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,885: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,886: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,905: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,906: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,906: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,906: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,907: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,907: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,908: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,908: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,908: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,910: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,910: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,910: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,911: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,911: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,912: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,912: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,912: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,913: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,913: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,913: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,914: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,936: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,937: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,938: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,939: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,939: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,940: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,940: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,940: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:15:24,941: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:21,754: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:21,755: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:21,925: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 14:16:21,964: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 14:16:21,965: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 14:16:21,965: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 14:16:22,231: root - INFO - User 2 has registered.
2024-03-04 14:16:22,235: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:16:22,508: root - INFO - User 3 has registered.
2024-03-04 14:16:22,511: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:16:22,546: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 14:16:22,815: root - INFO - User 4 has registered.
2024-03-04 14:16:22,819: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:16:22,821: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:22,821: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 14:16:22,821: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:22,821: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:22,822: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 14:16:22,822: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 14:16:22,822: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:22,822: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:22,822: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 14:16:22,822: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 14:16:22,822: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:22,822: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:22,822: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 14:16:22,822: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:22,822: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:22,823: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 14:16:22,823: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:22,823: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:22,823: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 14:16:22,823: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:22,823: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 14:16:23,056: root - INFO - User 2 has login.
2024-03-04 14:16:23,060: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 14:16:23,149: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 14:16:23,184: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 44, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 14:16:23,187: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:27,296: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::8740bd2b0e7dc6517b69aa640e4c5110' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:16:31,365: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::8740bd2b0e7dc6517b69aa640e4c5110' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:16:31,372: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 14:16:31,428: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 14:16:31,499: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 84, in get_platoons
    commander = await db_worker.get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 14:16:31,500: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:31,543: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 14:16:31,607: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 99, in get_count_squad_in_platoon
    count_squad = await db_worker.get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 14:16:31,610: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:31,656: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 14:16:31,693: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 39, in get_user_role
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 14:16:31,699: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:31,738: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 14:16:31,774: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 64, in get_user
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 14:16:31,777: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:31,816: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 14:16:31,854: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 79, in get_user_by_tg
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 14:16:31,857: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:31,899: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 14:16:31,944: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:16:31,999: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 14:16:32,038: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:16:32,074: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 159, in set_user_email
    message=f"Email {u_email.email} already exists.",
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 14:16:32,077: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 14:16:32,186: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 14:16:32,188: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:32,232: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:16:32,273: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 14:16:32,319: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 14:16:32,356: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:16:32,392: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:16:32,427: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:16:32,462: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:16:32,497: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 39, in set_visit_user
    await db_worker.set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 14:16:32,500: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 14:16:36,612: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::038f36afa0a82330b1815baed78c84f6' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:16:40,706: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::038f36afa0a82330b1815baed78c84f6' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:16:40,713: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 14:16:40,773: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 14:16:40,776: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:40,811: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 14:16:40,813: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:40,858: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:16:40,939: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 14:16:41,012: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 14:16:41,014: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:41,092: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:16:41,131: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 125, in get_attendance_status_user
    AttendDTO.model_validate(attendance, from_attributes=True) for attendance in attendances
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 14:16:41,136: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:41,177: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 14:16:41,240: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,241: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,241: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,242: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,242: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,243: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,243: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,243: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,244: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,244: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,244: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,245: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,245: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,245: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,246: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,246: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,247: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,247: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,247: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,248: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,248: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,248: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,249: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,249: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,249: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,250: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,250: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,251: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,251: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,251: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,252: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,252: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,252: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,253: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,253: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:41,254: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:49,660: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:49,662: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:16:49,813: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 14:16:49,848: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 14:16:49,849: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 14:16:49,849: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 14:16:50,103: root - INFO - User 2 has registered.
2024-03-04 14:16:50,107: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:16:50,385: root - INFO - User 3 has registered.
2024-03-04 14:16:50,388: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:16:50,426: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 14:16:50,699: root - INFO - User 4 has registered.
2024-03-04 14:16:50,702: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 14:16:50,704: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:50,704: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 14:16:50,704: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:50,705: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:50,706: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 14:16:50,706: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:50,706: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 14:16:50,706: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 14:16:50,706: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 14:16:50,706: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 14:16:50,937: root - INFO - User 2 has login.
2024-03-04 14:16:50,941: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 14:16:51,021: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 14:16:51,058: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 44, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 14:16:51,061: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:55,176: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::f9915e798869bb29d1abf2b5cb97bde7' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:16:59,265: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::f9915e798869bb29d1abf2b5cb97bde7' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:16:59,271: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 14:16:59,331: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 14:16:59,445: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 84, in get_platoons
    commander = await db_worker.get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 14:16:59,447: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:59,508: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 14:16:59,565: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 99, in get_count_squad_in_platoon
    count_squad = await db_worker.get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 14:16:59,569: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:59,612: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 14:16:59,652: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 36, in get_user_role
    role = await db_worker.get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 14:16:59,655: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:59,698: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 14:16:59,736: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 61, in get_user
    user = await db_worker.get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 14:16:59,740: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:59,781: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 14:16:59,817: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 76, in get_user_by_tg
    user = await db_worker.get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 14:16:59,820: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 14:16:59,860: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 14:16:59,896: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:16:59,940: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 14:16:59,976: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:17:00,016: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 156, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 14:17:00,020: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 14:17:00,147: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 14:17:00,149: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 14:17:00,191: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:17:00,230: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 14:17:00,278: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 14:17:00,316: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:17:00,350: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:17:00,386: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:17:00,421: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 14:17:00,456: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 39, in set_visit_user
    await db_worker.set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 14:17:00,459: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 14:17:04,567: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::f6c4846be50087dd6ce6229a8f220643' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:17:08,648: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::f6c4846be50087dd6ce6229a8f220643' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 14:17:08,655: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 14:17:08,710: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 14:17:08,713: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 14:17:08,751: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 14:17:08,755: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 14:17:08,804: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:17:08,897: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 14:17:08,976: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 14:17:08,980: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:17:09,053: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 14:17:09,090: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 122, in get_attendance_status_user
    attendances = await db_worker.get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 14:17:09,093: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 14:17:09,131: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 14:17:09,192: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,193: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,194: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,194: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,194: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,195: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,195: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,195: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,196: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,196: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,197: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,197: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,197: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,198: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,198: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,198: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,199: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,199: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,199: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,200: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,200: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,200: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,202: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,202: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,202: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,203: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,203: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,204: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,204: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,204: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,205: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,205: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,205: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,206: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,206: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 14:17:09,206: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:14,137: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:14,138: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:14,396: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 16:30:14,449: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 16:30:14,450: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 16:30:14,451: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 16:30:14,741: root - INFO - User 2 has registered.
2024-03-04 16:30:14,746: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 16:30:15,114: root - INFO - User 3 has registered.
2024-03-04 16:30:15,119: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 16:30:15,172: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 16:30:15,539: root - INFO - User 4 has registered.
2024-03-04 16:30:15,545: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 16:30:15,547: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 16:30:15,548: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 16:30:15,548: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 16:30:15,548: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 16:30:15,548: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 16:30:15,548: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 16:30:15,548: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 16:30:15,548: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 16:30:15,549: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 16:30:15,549: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 16:30:15,549: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 16:30:15,549: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 16:30:15,549: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 16:30:15,549: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 16:30:15,549: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 16:30:15,549: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 16:30:15,549: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 16:30:15,550: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 16:30:15,550: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 16:30:15,550: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 16:30:15,550: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 16:30:15,813: root - INFO - User 2 has login.
2024-03-04 16:30:15,819: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 16:30:15,976: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 16:30:16,030: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 44, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 16:30:16,036: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 16:30:20,153: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::c08fe400c128070e05e860b781e09b4e' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 16:30:24,261: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::c08fe400c128070e05e860b781e09b4e' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 16:30:24,269: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 16:30:24,338: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 16:30:24,442: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 84, in get_platoons
    commander = await db_worker.get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 16:30:24,443: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 16:30:24,510: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 16:30:24,568: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 99, in get_count_squad_in_platoon
    count_squad = await db_worker.get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 16:30:24,573: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 16:30:24,641: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 16:30:24,694: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 36, in get_user_role
    role = await db_worker.get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 16:30:24,699: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 16:30:24,809: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 16:30:24,867: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 61, in get_user
    user = await db_worker.get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 16:30:24,871: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 16:30:24,931: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 16:30:24,989: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 76, in get_user_by_tg
    user = await db_worker.get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 16:30:24,995: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 16:30:25,051: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 16:30:25,106: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 16:30:25,171: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 16:30:25,225: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 16:30:25,271: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 156, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 16:30:25,275: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 16:30:25,451: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 16:30:25,454: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 16:30:25,523: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 16:30:25,598: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 16:30:25,723: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 16:30:25,786: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 16:30:25,837: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 16:30:25,889: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 16:30:25,940: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 16:30:25,991: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 39, in set_visit_user
    await db_worker.set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 16:30:25,997: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 16:30:30,141: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::7adcfad9235d9589ae9f5dff354825df' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 16:30:34,246: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::7adcfad9235d9589ae9f5dff354825df' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1124, in create_connection
    raise exceptions[0]
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1101, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1004, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] Удаленный компьютер отклонил это сетевое подключение

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-03-04 16:30:34,252: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 16:30:34,317: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 16:30:34,322: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 16:30:34,374: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 16:30:34,379: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 16:30:34,442: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 16:30:34,569: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 16:30:34,701: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 16:30:34,705: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 16:30:34,827: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 16:30:34,888: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 122, in get_attendance_status_user
    attendances = await db_worker.get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 16:30:34,891: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 16:30:34,947: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 16:30:35,104: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,125: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,142: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,157: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,172: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,173: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,189: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,204: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,219: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,220: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,221: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,234: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,250: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,266: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,281: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,296: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,298: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,312: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,327: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,343: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,345: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,360: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,376: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,391: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,392: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,393: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,393: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,394: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,394: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,395: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,395: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,396: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,396: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,423: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,424: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 16:30:35,425: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:11,910: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:11,911: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:12,093: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-04 19:50:12,130: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-04 19:50:12,132: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-04 19:50:12,133: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-04 19:50:12,385: root - INFO - User 2 has registered.
2024-03-04 19:50:12,388: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 19:50:12,649: root - INFO - User 3 has registered.
2024-03-04 19:50:12,653: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 19:50:12,687: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-04 19:50:12,953: root - INFO - User 4 has registered.
2024-03-04 19:50:12,957: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-04 19:50:12,959: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 19:50:12,959: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-04 19:50:12,959: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 19:50:12,959: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 19:50:12,959: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-04 19:50:12,960: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-04 19:50:12,960: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 19:50:12,960: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 19:50:12,960: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-04 19:50:12,960: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-04 19:50:12,960: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 19:50:12,960: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 19:50:12,960: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-04 19:50:12,960: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 19:50:12,960: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 19:50:12,960: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-04 19:50:12,961: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 19:50:12,962: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-04 19:50:12,962: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-04 19:50:12,962: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-04 19:50:12,962: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-04 19:50:13,198: root - INFO - User 2 has login.
2024-03-04 19:50:13,202: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-04 19:50:13,283: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-04 19:50:13,318: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 44, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 19:50:13,324: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 19:50:15,643: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::996fdf3c423adf7b01c3cc7e7a0f075c' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-04 19:50:17,949: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::996fdf3c423adf7b01c3cc7e7a0f075c' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-04 19:50:17,954: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-04 19:50:17,996: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 19:50:18,070: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 84, in get_platoon_commander
    commander = await db_worker.get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-04 19:50:18,071: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 19:50:18,114: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-04 19:50:18,150: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 99, in get_count_squad_in_platoon
    count_squad = await db_worker.get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-04 19:50:18,153: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-04 19:50:18,204: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 19:50:18,239: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 36, in get_user_role
    role = await db_worker.get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-04 19:50:18,243: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 19:50:18,280: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-04 19:50:18,315: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 61, in get_user
    user = await db_worker.get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-04 19:50:18,317: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 19:50:18,355: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 19:50:18,389: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 76, in get_user_by_tg
    user = await db_worker.get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-04 19:50:18,393: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-04 19:50:18,438: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-04 19:50:18,474: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 19:50:18,515: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-04 19:50:18,551: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 19:50:18,585: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 156, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-04 19:50:18,588: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-04 19:50:18,699: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-04 19:50:18,701: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-04 19:50:18,741: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 19:50:18,779: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-04 19:50:18,823: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-04 19:50:18,860: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 19:50:18,894: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 19:50:18,926: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 19:50:18,959: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-04 19:50:18,991: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 39, in set_visit_user
    await db_worker.set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-04 19:50:18,998: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-04 19:50:21,307: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::120e019d3d82058da7e848dd7c558da5' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-04 19:50:23,580: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::120e019d3d82058da7e848dd7c558da5' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-04 19:50:23,587: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-04 19:50:23,638: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-04 19:50:23,649: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-04 19:50:23,682: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-04 19:50:23,685: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-04 19:50:23,732: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-04 19:50:23,808: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-04 19:50:23,883: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-04 19:50:23,885: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-04 19:50:23,964: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-04 19:50:24,000: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 122, in get_attendance_status_user
    attendances = await db_worker.get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-04 19:50:24,003: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-04 19:50:24,041: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-04 19:50:24,102: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,103: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,103: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,104: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,104: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,105: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,105: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,106: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,106: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,106: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,107: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,107: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,108: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,108: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,109: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,109: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,109: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,110: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,110: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,112: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,112: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,113: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,113: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,113: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,114: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,114: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,115: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,115: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,115: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,116: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,116: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,117: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,117: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,118: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,118: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-04 19:50:24,118: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:50:47,352: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:50:47,353: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,051: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,052: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,065: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,066: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,066: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,067: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,067: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,068: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,068: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,069: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,069: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,070: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,070: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,071: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,071: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,072: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,072: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,073: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,073: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,073: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,074: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,074: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,075: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,075: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,076: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,076: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,077: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,078: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,078: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,078: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,078: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,080: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,080: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,081: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,081: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:02,082: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:21,540: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:21,542: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:21,780: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-05 13:51:21,835: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-05 13:51:21,837: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-05 13:51:21,838: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-05 13:51:22,151: root - INFO - User 2 has registered.
2024-03-05 13:51:22,156: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-05 13:51:22,496: root - INFO - User 3 has registered.
2024-03-05 13:51:22,499: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-05 13:51:22,551: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-05 13:51:22,885: root - INFO - User 4 has registered.
2024-03-05 13:51:22,888: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-05 13:51:22,890: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:51:22,891: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-05 13:51:22,891: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:51:22,891: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:51:22,891: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-05 13:51:22,891: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-05 13:51:22,891: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:51:22,892: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-05 13:51:22,893: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:51:22,893: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-05 13:51:23,174: root - INFO - User 2 has login.
2024-03-05 13:51:23,177: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-05 13:51:23,260: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-05 13:51:23,299: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 45, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-05 13:51:23,304: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-05 13:51:23,340: root - ERROR - e=2 validation errors for PlatoonDataDTO
vus
  Field required [type=missing, input_value={'data': <sqlalchemy.engi... at 0x00000251883DD720>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/missing
semester
  Field required [type=missing, input_value={'data': <sqlalchemy.engi... at 0x00000251883DD720>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/missing, e.__class__=<class 'pydantic_core._pydantic_core.ValidationError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 72, in get_platoons
    return [PlatoonDataDTO(data=platoons) for platoon in transformed_platoons]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\pydantic\main.py", line 171, in __init__
    self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for PlatoonDataDTO
vus
  Field required [type=missing, input_value={'data': <sqlalchemy.engi... at 0x00000251883DD720>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/missing
semester
  Field required [type=missing, input_value={'data': <sqlalchemy.engi... at 0x00000251883DD720>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/missing
2024-03-05 13:51:23,347: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 500 Internal Server Error"
2024-03-05 13:51:23,504: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-05 13:51:23,574: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 85, in get_platoon_commander
    commander = await db_worker.get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-05 13:51:23,574: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-05 13:51:23,623: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-05 13:51:23,660: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 100, in get_count_squad_in_platoon
    count_squad = await db_worker.get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-05 13:51:23,663: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-05 13:51:23,701: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-05 13:51:23,737: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 36, in get_user_role
    role = await db_worker.get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-05 13:51:23,741: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-05 13:51:23,781: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-05 13:51:23,815: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 61, in get_user
    user = await db_worker.get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-05 13:51:23,818: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-05 13:51:23,857: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-05 13:51:23,891: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 76, in get_user_by_tg
    user = await db_worker.get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-05 13:51:23,893: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-05 13:51:23,937: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-05 13:51:23,974: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:51:24,017: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-05 13:51:24,052: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:51:24,090: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 156, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-05 13:51:24,093: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-05 13:51:24,206: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-05 13:51:24,208: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-05 13:51:24,248: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-05 13:51:24,289: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-05 13:51:24,335: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-05 13:51:24,373: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:51:24,407: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:51:24,441: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:51:24,474: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:51:24,507: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 39, in set_visit_user
    await db_worker.set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-05 13:51:24,511: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-05 13:51:26,829: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::6f9fdf1aed1c1adf479d9cd1db51cc4a' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-05 13:51:29,130: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::6f9fdf1aed1c1adf479d9cd1db51cc4a' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-05 13:51:29,137: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-05 13:51:29,188: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-05 13:51:29,193: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-05 13:51:29,229: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-05 13:51:29,231: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-05 13:51:29,277: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-05 13:51:29,353: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-05 13:51:29,426: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-05 13:51:29,428: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-05 13:51:29,507: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-05 13:51:29,542: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 122, in get_attendance_status_user
    attendances = await db_worker.get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-05 13:51:29,545: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-05 13:51:29,581: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-05 13:51:29,645: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,646: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,647: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,647: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,648: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,648: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,648: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,649: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,649: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,650: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,650: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,651: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,651: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,651: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,652: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,652: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,653: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,653: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,654: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,654: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,655: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,655: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,656: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,656: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,656: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,657: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,657: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,658: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,658: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,659: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,659: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,659: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,660: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,660: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,661: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:51:29,661: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:03,409: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:03,409: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:03,545: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-05 13:52:03,578: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-05 13:52:03,579: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-05 13:52:03,579: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-05 13:52:03,830: root - INFO - User 2 has registered.
2024-03-05 13:52:03,834: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-05 13:52:04,107: root - INFO - User 3 has registered.
2024-03-05 13:52:04,111: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-05 13:52:04,148: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-05 13:52:04,417: root - INFO - User 4 has registered.
2024-03-05 13:52:04,421: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-05 13:52:04,423: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:52:04,423: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-05 13:52:04,423: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:52:04,423: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:52:04,423: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-05 13:52:04,423: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-05 13:52:04,423: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:52:04,424: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:52:04,424: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-05 13:52:04,424: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-05 13:52:04,424: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:52:04,424: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:52:04,424: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-05 13:52:04,424: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:52:04,424: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:52:04,424: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-05 13:52:04,424: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:52:04,424: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-05 13:52:04,425: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-05 13:52:04,425: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-05 13:52:04,425: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-05 13:52:04,658: root - INFO - User 2 has login.
2024-03-05 13:52:04,662: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-05 13:52:04,747: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-05 13:52:04,788: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 45, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-05 13:52:04,792: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-05 13:52:04,831: root - ERROR - e=1 validation error for PlatoonDataDTO
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=0, input_type=int]
    For further information visit https://errors.pydantic.dev/2.6/v/model_attributes_type, e.__class__=<class 'pydantic_core._pydantic_core.ValidationError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 72, in get_platoons
    return [PlatoonDataDTO.model_validate(platoon, from_attributes=True) for platoon in transformed_platoons]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\pydantic\main.py", line 509, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for PlatoonDataDTO
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=0, input_type=int]
    For further information visit https://errors.pydantic.dev/2.6/v/model_attributes_type
2024-03-05 13:52:04,835: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 500 Internal Server Error"
2024-03-05 13:52:04,979: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-05 13:52:05,058: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 85, in get_platoon_commander
    commander = await db_worker.get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-05 13:52:05,059: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-05 13:52:05,099: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-05 13:52:05,139: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 100, in get_count_squad_in_platoon
    count_squad = await db_worker.get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-05 13:52:05,142: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-05 13:52:05,181: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-05 13:52:05,218: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 36, in get_user_role
    role = await db_worker.get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-05 13:52:05,222: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-05 13:52:05,262: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-05 13:52:05,298: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 61, in get_user
    user = await db_worker.get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-05 13:52:05,302: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-05 13:52:05,343: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-05 13:52:05,378: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 76, in get_user_by_tg
    user = await db_worker.get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-05 13:52:05,381: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-05 13:52:05,424: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-05 13:52:05,460: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:52:05,509: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-05 13:52:05,547: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:52:05,580: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 156, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-05 13:52:05,583: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-05 13:52:05,694: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-05 13:52:05,697: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-05 13:52:05,736: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-05 13:52:05,776: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-05 13:52:05,822: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-05 13:52:05,859: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:52:05,893: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:52:05,927: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:52:05,960: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-05 13:52:05,992: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 39, in set_visit_user
    await db_worker.set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-05 13:52:05,995: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-05 13:52:08,288: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::7fcb085bfe8f7734db098ce91963218c' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-05 13:52:10,571: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::7fcb085bfe8f7734db098ce91963218c' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-05 13:52:10,577: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-05 13:52:10,641: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-05 13:52:10,644: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-05 13:52:10,678: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-05 13:52:10,681: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-05 13:52:10,725: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-05 13:52:10,803: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-05 13:52:10,875: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-05 13:52:10,877: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-05 13:52:10,953: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-05 13:52:10,988: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 122, in get_attendance_status_user
    attendances = await db_worker.get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-05 13:52:10,992: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-05 13:52:11,030: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-05 13:52:11,090: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,091: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,091: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,092: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,092: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,092: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,093: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,093: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,094: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,094: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,094: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,095: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,095: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,096: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,096: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,096: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,097: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,097: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,098: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,098: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,099: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,099: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,099: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,100: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,100: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,101: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,101: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,101: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,102: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,102: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,103: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,103: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,103: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,104: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,104: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:11,106: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-05 13:52:44,444: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:37:32,498: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:32,499: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,265: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,266: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,266: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,267: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,267: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,267: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,268: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,268: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,269: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,269: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,270: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,270: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,271: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,271: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,272: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,272: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,273: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,273: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,274: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,274: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,275: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,275: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,276: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,276: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,276: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,277: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,277: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,278: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,278: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,279: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,279: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,280: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,280: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,280: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,281: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:45,281: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:49,376: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:49,377: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:49,546: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:37:49,582: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-07 16:37:49,584: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-07 16:37:49,584: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-07 16:37:49,834: root - INFO - User 2 has registered.
2024-03-07 16:37:49,838: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-07 16:37:50,112: root - INFO - User 3 has registered.
2024-03-07 16:37:50,115: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-07 16:37:50,154: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-07 16:37:50,430: root - INFO - User 4 has registered.
2024-03-07 16:37:50,433: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-07 16:37:50,435: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:37:50,435: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-07 16:37:50,435: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:37:50,435: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:37:50,436: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-07 16:37:50,436: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-07 16:37:50,436: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:37:50,436: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:37:50,437: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-07 16:37:50,437: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-07 16:37:50,437: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:37:50,437: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:37:50,438: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-07 16:37:50,438: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:37:50,438: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:37:50,438: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-07 16:37:50,438: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:37:50,438: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:37:50,438: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-07 16:37:50,439: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:37:50,439: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 16:37:50,676: root - INFO - User 2 has login.
2024-03-07 16:37:50,679: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-07 16:37:50,761: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-07 16:37:50,797: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 45, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-07 16:37:50,804: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:37:50,841: root - ERROR - e=1 validation error for PlatoonDataDTO
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=0, input_type=int]
    For further information visit https://errors.pydantic.dev/2.6/v/model_attributes_type, e.__class__=<class 'pydantic_core._pydantic_core.ValidationError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 72, in get_platoons
    return [PlatoonDataDTO.model_validate(platoon, from_attributes=True) for platoon in transformed_platoons]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\pydantic\main.py", line 509, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for PlatoonDataDTO
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=0, input_type=int]
    For further information visit https://errors.pydantic.dev/2.6/v/model_attributes_type
2024-03-07 16:37:50,847: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 500 Internal Server Error"
2024-03-07 16:37:50,987: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-07 16:37:51,056: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 85, in get_platoon_commander
    commander = await db_worker.get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-07 16:37:51,057: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:37:51,101: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-07 16:37:51,135: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 100, in get_count_squad_in_platoon
    count_squad = await db_worker.get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-07 16:37:51,138: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:37:51,178: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-07 16:37:51,213: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 36, in get_user_role
    role = await db_worker.get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-07 16:37:51,219: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-07 16:37:51,258: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-07 16:37:51,295: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 61, in get_user
    user = await db_worker.get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-07 16:37:51,298: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:37:51,338: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-07 16:37:51,373: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 76, in get_user_by_tg
    user = await db_worker.get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-07 16:37:51,377: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:37:51,423: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-07 16:37:51,460: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:37:51,503: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-07 16:37:51,539: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:37:51,572: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 156, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-07 16:37:51,575: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-07 16:37:51,688: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-07 16:37:51,690: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-07 16:37:51,729: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-07 16:37:51,767: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-07 16:37:51,814: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-07 16:37:51,852: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:37:51,886: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:37:51,919: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:37:51,952: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:37:51,983: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 39, in set_visit_user
    await db_worker.set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-07 16:37:51,989: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-07 16:37:54,319: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::42312d78bbe269e87a6ddf0181692642' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-07 16:37:56,631: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::42312d78bbe269e87a6ddf0181692642' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-07 16:37:56,639: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-07 16:37:56,701: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-07 16:37:56,712: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-07 16:37:56,759: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-07 16:37:56,762: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-07 16:37:56,823: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-07 16:37:56,922: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-07 16:37:57,020: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-07 16:37:57,023: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-07 16:37:57,132: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-07 16:37:57,176: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 122, in get_attendance_status_user
    attendances = await db_worker.get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-07 16:37:57,179: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-07 16:37:57,217: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-07 16:37:57,274: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,275: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,275: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,276: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,276: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,277: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,277: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,278: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,278: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,279: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,279: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,280: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,280: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,280: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,281: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,281: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,282: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,282: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,283: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,283: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,283: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,284: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,284: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,285: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,285: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,286: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,286: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,287: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,287: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,287: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,288: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,288: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,289: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,289: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,290: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:37:57,290: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:38:57,520: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:39:23,135: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:40:01,631: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:42:33,320: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:42:48,122: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:43:04,241: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:43:04,302: sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2024-03-07 16:43:04,302: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 16:43:04,307: sqlalchemy.engine.Engine - INFO - select current_schema()
2024-03-07 16:43:04,307: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 16:43:04,311: sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2024-03-07 16:43:04,311: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 16:43:04,313: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 16:43:04,316: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 16:43:04,316: sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('user@example.com',)
2024-03-07 16:43:04,326: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 16:43:27,981: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:43:27,981: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-07 16:43:27,982: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:43:27,982: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:43:27,982: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-07 16:43:27,982: multipart.multipart - DEBUG - Calling on_field_data with data[21:39]
2024-03-07 16:43:27,982: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:43:27,983: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:43:27,983: multipart.multipart - DEBUG - Calling on_field_name with data[40:48]
2024-03-07 16:43:27,983: multipart.multipart - DEBUG - Calling on_field_data with data[49:55]
2024-03-07 16:43:27,983: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:43:27,983: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:43:27,984: multipart.multipart - DEBUG - Calling on_field_name with data[56:61]
2024-03-07 16:43:27,984: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:43:27,984: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:43:27,984: multipart.multipart - DEBUG - Calling on_field_name with data[63:72]
2024-03-07 16:43:27,984: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:43:27,984: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:43:27,985: multipart.multipart - DEBUG - Calling on_field_name with data[74:87]
2024-03-07 16:43:27,985: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:43:27,985: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 16:43:28,003: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 16:43:28,003: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 16:43:28,004: sqlalchemy.engine.Engine - INFO - [cached since 23.69s ago] ('user@example.com',)
2024-03-07 16:43:28,007: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-07 16:43:28,009: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-07 16:43:28,009: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-07 16:43:28,263: root - INFO - User 1 has login.
2024-03-07 16:43:28,263: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 16:44:05,039: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 16:44:05,040: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE "user".id = $1::INTEGER
2024-03-07 16:44:05,041: sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] (1,)
2024-03-07 16:44:05,046: sqlalchemy.engine.Engine - INFO - SELECT platoon.platoon_number, platoon.vus, platoon.semester 
FROM platoon
2024-03-07 16:44:05,046: sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ()
2024-03-07 16:44:05,051: root - ERROR - e=1 validation error for PlatoonDataDTO
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=818, input_type=int]
    For further information visit https://errors.pydantic.dev/2.6/v/model_attributes_type, e.__class__=<class 'pydantic_core._pydantic_core.ValidationError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 72, in get_platoons
    return [PlatoonDataDTO.model_validate(platoon, from_attributes=True) for platoon in transformed_platoons]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\pydantic\main.py", line 509, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for PlatoonDataDTO
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=818, input_type=int]
    For further information visit https://errors.pydantic.dev/2.6/v/model_attributes_type
2024-03-07 16:44:05,052: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 16:44:09,418: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 16:44:09,419: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE "user".id = $1::INTEGER
2024-03-07 16:44:09,420: sqlalchemy.engine.Engine - INFO - [cached since 4.38s ago] (1,)
2024-03-07 16:44:09,424: sqlalchemy.engine.Engine - INFO - SELECT platoon.platoon_number, platoon.vus, platoon.semester 
FROM platoon
2024-03-07 16:44:09,425: sqlalchemy.engine.Engine - INFO - [cached since 4.379s ago] ()
2024-03-07 16:44:09,427: root - ERROR - e=1 validation error for PlatoonDataDTO
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=818, input_type=int]
    For further information visit https://errors.pydantic.dev/2.6/v/model_attributes_type, e.__class__=<class 'pydantic_core._pydantic_core.ValidationError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 72, in get_platoons
    return [PlatoonDataDTO.model_validate(platoon, from_attributes=True) for platoon in transformed_platoons]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\pydantic\main.py", line 509, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for PlatoonDataDTO
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=818, input_type=int]
    For further information visit https://errors.pydantic.dev/2.6/v/model_attributes_type
2024-03-07 16:44:09,428: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 16:45:07,976: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:45:08,036: sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2024-03-07 16:45:08,037: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 16:45:08,043: sqlalchemy.engine.Engine - INFO - select current_schema()
2024-03-07 16:45:08,047: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 16:45:08,058: sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2024-03-07 16:45:08,058: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 16:45:08,061: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 16:45:08,064: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE "user".id = $1::INTEGER
2024-03-07 16:45:08,065: sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] (1,)
2024-03-07 16:45:08,068: sqlalchemy.engine.Engine - INFO - SELECT platoon.platoon_number, platoon.vus, platoon.semester 
FROM platoon
2024-03-07 16:45:08,069: sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ()
2024-03-07 16:45:08,071: root - ERROR - e=1 validation error for PlatoonDataDTO
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=818, input_type=int]
    For further information visit https://errors.pydantic.dev/2.6/v/model_attributes_type, e.__class__=<class 'pydantic_core._pydantic_core.ValidationError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 72, in get_platoons
    return [PlatoonDataDTO.model_validate(platoon, from_attributes=True) for platoon in transformed_platoons]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\pydantic\main.py", line 509, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for PlatoonDataDTO
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=818, input_type=int]
    For further information visit https://errors.pydantic.dev/2.6/v/model_attributes_type
2024-03-07 16:45:08,072: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 16:46:30,846: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:46:30,887: sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2024-03-07 16:46:30,887: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 16:46:30,890: sqlalchemy.engine.Engine - INFO - select current_schema()
2024-03-07 16:46:30,890: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 16:46:30,893: sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2024-03-07 16:46:30,894: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 16:46:30,895: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 16:46:30,897: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE "user".id = $1::INTEGER
2024-03-07 16:46:30,898: sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] (1,)
2024-03-07 16:46:30,901: sqlalchemy.engine.Engine - INFO - SELECT platoon.platoon_number, platoon.vus, platoon.semester 
FROM platoon
2024-03-07 16:46:30,901: sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ()
2024-03-07 16:46:30,903: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 16:46:51,602: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:51,603: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:51,741: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:46:51,774: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-07 16:46:51,775: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-07 16:46:51,775: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-07 16:46:52,027: root - INFO - User 2 has registered.
2024-03-07 16:46:52,030: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-07 16:46:52,357: root - INFO - User 3 has registered.
2024-03-07 16:46:52,360: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-07 16:46:52,405: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-07 16:46:52,708: root - INFO - User 4 has registered.
2024-03-07 16:46:52,710: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-07 16:46:52,712: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:46:52,712: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-07 16:46:52,712: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:46:52,712: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:46:52,713: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-07 16:46:52,714: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:46:52,715: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:46:52,715: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-07 16:46:52,715: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:46:52,715: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 16:46:52,943: root - INFO - User 2 has login.
2024-03-07 16:46:52,948: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-07 16:46:53,037: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-07 16:46:53,089: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 45, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-07 16:46:53,093: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:46:53,136: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-07 16:46:53,281: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-07 16:46:53,351: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 85, in get_platoon_commander
    commander = await db_worker.get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-07 16:46:53,352: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:46:53,393: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-07 16:46:53,430: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 100, in get_count_squad_in_platoon
    count_squad = await db_worker.get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-07 16:46:53,433: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:46:53,473: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-07 16:46:53,508: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 36, in get_user_role
    role = await db_worker.get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-07 16:46:53,511: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-07 16:46:53,551: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-07 16:46:53,587: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 61, in get_user
    user = await db_worker.get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-07 16:46:53,590: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:46:53,629: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-07 16:46:53,664: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 76, in get_user_by_tg
    user = await db_worker.get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-07 16:46:53,667: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:46:53,708: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-07 16:46:53,744: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:46:53,791: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-07 16:46:53,827: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:46:53,861: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 156, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-07 16:46:53,864: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-07 16:46:53,976: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-07 16:46:53,978: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-07 16:46:54,021: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-07 16:46:54,058: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-07 16:46:54,103: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-07 16:46:54,139: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:46:54,174: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:46:54,207: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:46:54,240: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:46:54,273: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 39, in set_visit_user
    await db_worker.set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-07 16:46:54,276: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-07 16:46:56,575: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::b5dc11669e983c421add0acbabf79630' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-07 16:46:58,869: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::b5dc11669e983c421add0acbabf79630' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-07 16:46:58,876: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-07 16:46:58,931: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-07 16:46:58,937: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-07 16:46:58,974: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-07 16:46:58,977: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-07 16:46:59,024: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-07 16:46:59,101: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-07 16:46:59,174: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-07 16:46:59,177: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-07 16:46:59,252: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-07 16:46:59,287: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 122, in get_attendance_status_user
    attendances = await db_worker.get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-07 16:46:59,290: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-07 16:46:59,326: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-07 16:46:59,386: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,387: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,387: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,388: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,388: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,389: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,389: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,389: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,390: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,390: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,391: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,391: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,392: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,392: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,392: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,393: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,393: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,394: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,394: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,394: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,395: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,395: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,396: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,396: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,396: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,407: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,407: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,408: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,408: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,409: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,409: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,409: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,410: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,410: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,411: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:46:59,411: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:31,909: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:31,910: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:32,032: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 16:53:32,066: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-07 16:53:32,068: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-07 16:53:32,069: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-07 16:53:32,314: root - INFO - User 2 has registered.
2024-03-07 16:53:32,317: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-07 16:53:32,584: root - INFO - User 3 has registered.
2024-03-07 16:53:32,587: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-07 16:53:32,622: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 400 Bad Request"
2024-03-07 16:53:32,879: root - INFO - User 4 has registered.
2024-03-07 16:53:32,882: httpx - INFO - HTTP Request: POST http://test/auth/register "HTTP/1.1 201 Created"
2024-03-07 16:53:32,884: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_name with data[0:10]
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_name with data[12:20]
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_data with data[21:42]
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_name with data[43:51]
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_data with data[52:58]
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:53:32,885: multipart.multipart - DEBUG - Calling on_field_name with data[59:64]
2024-03-07 16:53:32,886: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:53:32,886: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:53:32,886: multipart.multipart - DEBUG - Calling on_field_name with data[66:75]
2024-03-07 16:53:32,886: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:53:32,886: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 16:53:32,886: multipart.multipart - DEBUG - Calling on_field_name with data[77:90]
2024-03-07 16:53:32,886: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 16:53:32,886: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 16:53:33,125: root - INFO - User 2 has login.
2024-03-07 16:53:33,128: httpx - INFO - HTTP Request: POST http://test/auth/jwt/login "HTTP/1.1 204 No Content"
2024-03-07 16:53:33,178: httpx - INFO - HTTP Request: POST http://test/platoons/create "HTTP/1.1 201 Created"
2024-03-07 16:53:33,214: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 45, in get_platoon
    platoon = await db_worker.get_platoon(platoon_number)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 22, in get_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-07 16:53:33,221: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:53:33,260: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoons "HTTP/1.1 200 OK"
2024-03-07 16:53:33,301: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-07 16:53:33,375: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 85, in get_platoon_commander
    commander = await db_worker.get_platoon_commander(platoon_number)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 216, in get_platoon_commander
    raise PlatoonError(
exceptions.PlatoonError: Командир во взводе "-10" не найден
2024-03-07 16:53:33,376: httpx - INFO - HTTP Request: GET http://test/platoons/get_platoon_commander?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:53:33,418: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=0 "HTTP/1.1 200 OK"
2024-03-07 16:53:33,455: root - ERROR - e=PlatoonError(), e.__class__=<class 'exceptions.PlatoonError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\platoon.py", line 100, in get_count_squad_in_platoon
    count_squad = await db_worker.get_count_squad_in_platoon(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 237, in get_count_squad_in_platoon
    raise PlatoonError(
exceptions.PlatoonError: Platoon not found
2024-03-07 16:53:33,458: httpx - INFO - HTTP Request: GET http://test/platoons/get_count_squad_in_platoon?platoon_number=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:53:33,500: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=2 "HTTP/1.1 200 OK"
2024-03-07 16:53:33,536: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 36, in get_user_role
    role = await db_worker.get_user_role(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 164, in get_user_role
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-1 not found
2024-03-07 16:53:33,540: httpx - INFO - HTTP Request: GET http://test/users/get_user_role?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-07 16:53:33,580: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=2 "HTTP/1.1 200 OK"
2024-03-07 16:53:33,616: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 61, in get_user
    user = await db_worker.get_user(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 175, in get_user
    raise UserNotFound(
exceptions.UserNotFound: User user_id=-10 not found
2024-03-07 16:53:33,620: httpx - INFO - HTTP Request: GET http://test/users/get_user?user_id=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:53:33,658: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-07 16:53:33,694: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 76, in get_user_by_tg
    user = await db_worker.get_user_by_tg(telegram_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 191, in get_user_by_tg
    raise UserNotFound(
exceptions.UserNotFound: User telegram_id=-10 not found
2024-03-07 16:53:33,698: httpx - INFO - HTTP Request: GET http://test/users/get_user_by_tg?telegram_id=-10 "HTTP/1.1 404 Not Found"
2024-03-07 16:53:33,737: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 204 No Content"
2024-03-07 16:53:33,773: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_attr "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:53:33,823: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 204 No Content"
2024-03-07 16:53:33,859: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:53:33,891: root - ERROR - e=EmailError(), e.__class__=<class 'exceptions.EmailError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 156, in set_user_email
    raise EmailError(
exceptions.EmailError: Email user@example.com already exists.
2024-03-07 16:53:33,894: httpx - INFO - HTTP Request: PATCH http://test/users/set_user_mail "HTTP/1.1 400 Bad Request"
2024-03-07 16:53:34,005: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=0&semester=1 "HTTP/1.1 200 OK"
2024-03-07 16:53:34,007: httpx - INFO - HTTP Request: GET http://test/subject/get_subjects?platoon_number=352&semester=1 "HTTP/1.1 404 Not Found"
2024-03-07 16:53:34,047: httpx - INFO - HTTP Request: GET http://test/professor/get_semesters?user_id=1 "HTTP/1.1 200 OK"
2024-03-07 16:53:34,084: httpx - INFO - HTTP Request: GET http://test/users/get_id_from_tg?telegram_id=818 "HTTP/1.1 200 OK"
2024-03-07 16:53:34,129: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 204 No Content"
2024-03-07 16:53:34,166: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:53:34,199: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:53:34,234: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:53:34,267: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 422 Unprocessable Entity"
2024-03-07 16:53:34,299: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\professor.py", line 39, in set_visit_user
    await db_worker.set_visit_user(**convert_schema_to_dict(attendance))
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 100, in set_visit_user
    raise UserNotFound(status_code=HTTPStatus.NOT_FOUND)
exceptions.UserNotFound: Пользователь не существует
2024-03-07 16:53:34,303: httpx - INFO - HTTP Request: POST http://test/professor/set_visit_user "HTTP/1.1 404 Not Found"
2024-03-07 16:53:36,605: fastapi_cache.decorator - WARNING - Error retrieving cache key 'fastapi-cache::870b280fb458380b696096d90588c2ba' from backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 137, in inner
    ttl, ret = await backend.get_with_ttl(cache_key)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 16, in get_with_ttl
    return await pipe.ttl(key).get(key).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 1392, in execute
    conn = await self.connection_pool.get_connection("MULTI", self.shard_hint)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-07 16:53:38,896: fastapi_cache.decorator - WARNING - Error setting cache key 'fastapi-cache::870b280fb458380b696096d90588c2ba' in backend:
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 577, in connect
    await self.retry.call_with_retry(
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 922, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1077, in create_connection
    infos = await self._ensure_resolved(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1453, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 898, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\AppData\Local\Programs\Python\Python312\Lib\socket.py", line 963, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\decorator.py", line 173, in inner
    await backend.set(cache_key, encoded_ret, expire)
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\fastapi_cache\backends\redis.py", line 22, in set
    return await self.redis.set(key, value, ex=expire)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\client.py", line 513, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1375, in get_connection
    await connection.connect()
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\redis\asyncio\connection.py", line 585, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 11001 connecting to redis:5370. 11001.
2024-03-07 16:53:38,902: httpx - INFO - HTTP Request: GET http://test/users/get_students_list "HTTP/1.1 200 OK"
2024-03-07 16:53:38,945: root - ERROR - e=SubjectError(), e.__class__=<class 'exceptions.SubjectError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 65, in get_gradings_by_student
    raise SubjectError(
exceptions.SubjectError: Данного предмета не существует
2024-03-07 16:53:38,949: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=9129 "HTTP/1.1 404 Not Found"
2024-03-07 16:53:38,986: root - ERROR - e=UserError(), e.__class__=<class 'exceptions.UserError'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\subject.py", line 79, in get_gradings_by_student
    gradings = await db_worker.get_gradings_by_student(user_id, subject_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 60, in get_gradings_by_student
    raise UserError(
exceptions.UserError: Пользователя не существует
2024-03-07 16:53:38,989: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=2356&subject_id=1 "HTTP/1.1 404 Not Found"
2024-03-07 16:53:39,037: httpx - INFO - HTTP Request: GET http://test/subject/get_gradings_by_student?user_id=1&subject_id=1 "HTTP/1.1 200 OK"
2024-03-07 16:53:39,116: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_now_semester?platoon_number=818 "HTTP/1.1 200 OK"
2024-03-07 16:53:39,188: httpx - INFO - HTTP Request: GET http://test/subject/get_subject_by_semester?platoon_number=818&semester=1 "HTTP/1.1 200 OK"
2024-03-07 16:53:39,191: httpx - INFO - HTTP Request: GET http://test/professor/get_subject_by_now_semester?platoon_number=-1 "HTTP/1.1 404 Not Found"
2024-03-07 16:53:39,270: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=1 "HTTP/1.1 200 OK"
2024-03-07 16:53:39,309: root - ERROR - e=UserNotFound(), e.__class__=<class 'exceptions.UserNotFound'>
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\util.py", line 22, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\api\v1\user.py", line 122, in get_attendance_status_user
    attendances = await db_worker.get_attendance_status_user(user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Berky\PycharmProjects\vuc-backend\src\services\database\worker.py", line 44, in get_attendance_status_user
    raise UserNotFound(
exceptions.UserNotFound: Данного пользователя не существует
2024-03-07 16:53:39,312: httpx - INFO - HTTP Request: GET http://test/users/get_attendance_status_user?user_id=-1 "HTTP/1.1 404 Not Found"
2024-03-07 16:53:39,350: httpx - INFO - HTTP Request: POST http://test/auth/jwt/logout "HTTP/1.1 204 No Content"
2024-03-07 16:53:39,415: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,416: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,417: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,417: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,418: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,418: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,418: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,419: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,419: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,441: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,442: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,443: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,443: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,443: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,444: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,444: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,445: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,445: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,446: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,446: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,447: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,447: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,448: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,448: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,448: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,449: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,449: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,450: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,450: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,451: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,451: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,452: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,452: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,453: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,453: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 16:53:39,453: asyncio - DEBUG - Using proactor: IocpProactor
2024-03-07 20:06:39,414: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:06:39,420: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:06:39,420: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:06:39,420: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:06:39,421: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:06:39,421: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:06:39,421: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:06:39,421: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:06:39,421: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:06:39,435: passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2024-03-07 20:06:39,501: sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2024-03-07 20:06:39,502: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 20:06:39,507: sqlalchemy.engine.Engine - INFO - select current_schema()
2024-03-07 20:06:39,508: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 20:06:39,513: sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2024-03-07 20:06:39,513: sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-03-07 20:06:39,517: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:06:39,520: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:06:39,521: sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] ('user@example.com',)
2024-03-07 20:06:39,529: passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\Berky\PycharmProjects\vuc-backend\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2024-03-07 20:06:39,532: passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2024-03-07 20:06:39,532: passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2024-03-07 20:06:39,740: root - INFO - User 1 has login.
2024-03-07 20:06:39,741: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:06:57,998: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:06:57,999: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:06:57,999: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:06:57,999: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:06:57,999: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:06:58,000: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:06:58,000: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:06:58,000: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:06:58,000: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:06:58,002: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:06:58,003: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:06:58,003: sqlalchemy.engine.Engine - INFO - [cached since 18.48s ago] ('user@example.com',)
2024-03-07 20:06:58,199: root - INFO - User 1 has login.
2024-03-07 20:06:58,200: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:07:04,697: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:07:04,697: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:07:04,697: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:07:04,697: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:07:04,698: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:07:04,698: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:07:04,698: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:07:04,698: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:07:04,698: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:07:04,700: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:07:04,701: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:07:04,702: sqlalchemy.engine.Engine - INFO - [cached since 25.18s ago] ('user@example.com',)
2024-03-07 20:07:04,903: root - INFO - User 1 has login.
2024-03-07 20:07:04,903: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:07:30,372: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:07:30,372: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:07:30,372: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:07:30,373: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:07:30,373: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:07:30,373: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:07:30,373: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:07:30,373: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:07:30,373: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:07:30,376: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:07:30,376: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:07:30,377: sqlalchemy.engine.Engine - INFO - [cached since 50.86s ago] ('user@example.com',)
2024-03-07 20:07:30,580: root - INFO - User 1 has login.
2024-03-07 20:07:30,580: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:07:47,542: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:07:47,543: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:07:47,543: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:07:47,543: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:07:47,543: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:07:47,544: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:07:47,544: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:07:47,544: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:07:47,544: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:07:47,546: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:07:47,547: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:07:47,547: sqlalchemy.engine.Engine - INFO - [cached since 68.03s ago] ('user@example.com',)
2024-03-07 20:07:47,747: root - INFO - User 1 has login.
2024-03-07 20:07:47,748: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:08:01,000: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:08:01,000: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:08:01,000: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:08:01,000: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:08:01,001: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:08:01,001: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:08:01,001: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:08:01,001: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:08:01,001: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:08:01,003: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:08:01,004: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:08:01,005: sqlalchemy.engine.Engine - INFO - [cached since 81.48s ago] ('user@example.com',)
2024-03-07 20:08:01,203: root - INFO - User 1 has login.
2024-03-07 20:08:01,203: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:12:31,326: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:12:31,326: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:12:31,327: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:12:31,327: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:12:31,327: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:12:31,327: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:12:31,327: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:12:31,328: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:12:31,328: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:12:31,330: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:12:31,331: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:12:31,331: sqlalchemy.engine.Engine - INFO - [cached since 351.8s ago] ('user@example.com',)
2024-03-07 20:12:31,530: root - INFO - User 1 has login.
2024-03-07 20:12:31,530: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:12:44,249: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:12:44,249: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:12:44,249: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:12:44,249: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:12:44,250: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:12:44,250: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:12:44,250: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:12:44,250: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:12:44,250: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:12:44,252: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:12:44,253: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:12:44,254: sqlalchemy.engine.Engine - INFO - [cached since 364.7s ago] ('user@example.com',)
2024-03-07 20:12:44,457: root - INFO - User 1 has login.
2024-03-07 20:12:44,458: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:12:56,434: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:12:56,435: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:12:56,435: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:12:56,435: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:12:56,435: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:12:56,436: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:12:56,436: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:12:56,436: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:12:56,436: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:12:56,438: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:12:56,439: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:12:56,439: sqlalchemy.engine.Engine - INFO - [cached since 376.9s ago] ('user@example.com',)
2024-03-07 20:12:56,637: root - INFO - User 1 has login.
2024-03-07 20:12:56,638: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:13:07,347: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:13:07,347: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:13:07,347: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:13:07,347: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:13:07,348: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:13:07,348: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:13:07,348: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:13:07,348: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:13:07,348: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:13:07,350: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:13:07,351: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:13:07,352: sqlalchemy.engine.Engine - INFO - [cached since 387.8s ago] ('user@example.com',)
2024-03-07 20:13:07,558: root - INFO - User 1 has login.
2024-03-07 20:13:07,558: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:13:32,863: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:13:32,863: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:13:32,863: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:13:32,863: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:13:32,864: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:13:32,864: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:13:32,864: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:13:32,864: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:13:32,864: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:13:32,866: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:13:32,867: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:13:32,867: sqlalchemy.engine.Engine - INFO - [cached since 413.3s ago] ('user@example.com',)
2024-03-07 20:13:33,070: root - INFO - User 1 has login.
2024-03-07 20:13:33,071: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:13:45,588: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:13:45,588: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:13:45,588: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:13:45,588: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:13:45,589: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:13:45,589: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:13:45,589: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:13:45,589: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:13:45,589: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:13:45,591: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:13:45,592: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:13:45,593: sqlalchemy.engine.Engine - INFO - [cached since 426.1s ago] ('user@example.com',)
2024-03-07 20:13:45,795: root - INFO - User 1 has login.
2024-03-07 20:13:45,795: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:13:58,762: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:13:58,763: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:13:58,763: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:13:58,763: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:13:58,763: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:13:58,764: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:13:58,764: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:13:58,764: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:13:58,764: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:13:58,766: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:13:58,767: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:13:58,767: sqlalchemy.engine.Engine - INFO - [cached since 439.2s ago] ('user@example.com',)
2024-03-07 20:13:58,968: root - INFO - User 1 has login.
2024-03-07 20:13:58,968: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:14:05,263: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:14:05,263: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:14:05,263: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:14:05,263: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:14:05,264: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:14:05,264: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:14:05,264: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:14:05,264: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:14:05,264: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:14:05,266: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:14:05,267: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:14:05,268: sqlalchemy.engine.Engine - INFO - [cached since 445.7s ago] ('user@example.com',)
2024-03-07 20:14:05,469: root - INFO - User 1 has login.
2024-03-07 20:14:05,470: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:14:15,333: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:14:15,333: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:14:15,333: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:14:15,334: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:14:15,334: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:14:15,334: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:14:15,334: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:14:15,334: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:14:15,334: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:14:15,336: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:14:15,337: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:14:15,338: sqlalchemy.engine.Engine - INFO - [cached since 455.8s ago] ('user@example.com',)
2024-03-07 20:14:15,537: root - INFO - User 1 has login.
2024-03-07 20:14:15,537: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:14:29,836: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:14:29,837: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:14:29,837: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:14:29,837: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:14:29,837: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:14:29,837: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:14:29,838: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:14:29,838: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:14:29,838: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:14:29,840: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:14:29,840: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:14:29,841: sqlalchemy.engine.Engine - INFO - [cached since 470.3s ago] ('user@example.com',)
2024-03-07 20:14:30,042: root - INFO - User 1 has login.
2024-03-07 20:14:30,043: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:14:48,853: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:14:48,854: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:14:48,854: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:14:48,854: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:14:48,854: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:14:48,855: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:14:48,855: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:14:48,855: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:14:48,855: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:14:48,857: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:14:48,858: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:14:48,858: sqlalchemy.engine.Engine - INFO - [cached since 489.3s ago] ('user@example.com',)
2024-03-07 20:14:49,061: root - INFO - User 1 has login.
2024-03-07 20:14:49,061: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:15:03,783: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:15:03,783: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:15:03,783: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:15:03,784: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:15:03,784: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:15:03,784: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:15:03,784: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:15:03,785: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:15:03,785: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:15:03,786: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:15:03,787: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:15:03,788: sqlalchemy.engine.Engine - INFO - [cached since 504.3s ago] ('user@example.com',)
2024-03-07 20:15:03,987: root - INFO - User 1 has login.
2024-03-07 20:15:03,988: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:15:36,654: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:15:36,655: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:15:36,655: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:15:36,655: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:15:36,655: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:15:36,656: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:15:36,656: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:15:36,656: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:15:36,656: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:15:36,658: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:15:36,659: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:15:36,659: sqlalchemy.engine.Engine - INFO - [cached since 537.1s ago] ('user@example.com',)
2024-03-07 20:15:36,859: root - INFO - User 1 has login.
2024-03-07 20:15:36,860: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:16:12,605: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:16:12,606: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:16:12,606: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:16:12,606: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:16:12,606: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:16:12,606: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:16:12,607: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:16:12,607: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:16:12,607: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:16:12,609: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:16:12,609: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:16:12,610: sqlalchemy.engine.Engine - INFO - [cached since 573.1s ago] ('user@example.com',)
2024-03-07 20:16:12,809: root - INFO - User 1 has login.
2024-03-07 20:16:12,810: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:16:27,193: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:16:27,194: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:16:27,194: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:16:27,194: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:16:27,194: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:16:27,194: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:16:27,195: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:16:27,195: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:16:27,195: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:16:27,197: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:16:27,197: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:16:27,198: sqlalchemy.engine.Engine - INFO - [cached since 587.7s ago] ('user@example.com',)
2024-03-07 20:16:27,401: root - INFO - User 1 has login.
2024-03-07 20:16:27,401: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:16:36,437: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:16:36,437: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:16:36,437: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:16:36,437: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:16:36,438: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:16:36,438: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:16:36,438: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:16:36,438: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:16:36,438: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:16:36,440: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:16:36,441: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:16:36,441: sqlalchemy.engine.Engine - INFO - [cached since 596.9s ago] ('user@example.com',)
2024-03-07 20:16:36,644: root - INFO - User 1 has login.
2024-03-07 20:16:36,644: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:18:18,171: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:18:18,172: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:18:18,172: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:18:18,172: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:18:18,172: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:18:18,172: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:18:18,173: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:18:18,173: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:18:18,173: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:18:18,175: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-03-07 20:18:18,176: sqlalchemy.engine.Engine - INFO - SELECT "user".id, "user".name, "user".phone, "user".date_of_birth, "user".address, "user".institute, "user".direction_of_study, "user".platoon_number, "user".squad_number, "user".role, "user".telegram_id, "user".token, "user".group_study, "user".email, "user".registered_at, "user".hashed_password, "user".is_active, "user".is_superuser, "user".is_verified 
FROM "user" 
WHERE lower("user".email) = lower($1::VARCHAR)
2024-03-07 20:18:18,176: sqlalchemy.engine.Engine - INFO - [cached since 698.7s ago] ('user@example.com',)
2024-03-07 20:18:18,377: root - INFO - User 1 has login.
2024-03-07 20:18:18,378: sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-03-07 20:20:20,198: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:20:20,198: multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2024-03-07 20:20:20,199: multipart.multipart - DEBUG - Calling on_field_data with data[9:27]
2024-03-07 20:20:20,199: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:20:20,199: multipart.multipart - DEBUG - Calling on_field_start with no data
2024-03-07 20:20:20,199: multipart.multipart - DEBUG - Calling on_field_name with data[28:36]
2024-03-07 20:20:20,199: multipart.multipart - DEBUG - Calling on_field_data with data[37:43]
2024-03-07 20:20:20,200: multipart.multipart - DEBUG - Calling on_field_end with no data
2024-03-07 20:20:20,200: multipart.multipart - DEBUG - Calling on_end with no data
2024-03-07 20:20:20,202: sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
